import{$ as h,Ca as d,Qc as o,X as p,g as a}from"./chunk-V4EMFQCR.js";import{a as t,b as s}from"./chunk-EQDQRRRY.js";var i={density:"comfortable",speedUnit:"kn",depthUnit:"m",shallowThreshold:3,theme:"night"},l="omi-preferences",f="omi-theme",m=class n{constructor(e){this.platformId=e;if(o(this.platformId)){let r=localStorage.getItem(l);if(r)try{let c=JSON.parse(r);this._preferences.next(t(t({},i),c))}catch(c){}}this.preferences$.subscribe(r=>{this.applyPreferences(r)})}_preferences=new a(i);preferences$=this._preferences.asObservable();prefs$=this.preferences$;get snapshot(){return this._preferences.value}getSnapshot(){return this._preferences.value}setDensity(e){this._preferences.next(s(t({},this._preferences.value),{density:e}))}toggleDensity(){let e=this._preferences.value.density;this.setDensity(e==="comfortable"?"compact":"comfortable")}setSpeedUnit(e){this._preferences.next(s(t({},this._preferences.value),{speedUnit:e}))}setDepthUnit(e){this._preferences.next(s(t({},this._preferences.value),{depthUnit:e}))}setShallowThreshold(e){this._preferences.next(s(t({},this._preferences.value),{shallowThreshold:e}))}setTheme(e){this._preferences.next(s(t({},this._preferences.value),{theme:e}))}toggleTheme(){let e=this._preferences.value.theme==="day"?"night":"day";this.setTheme(e)}reset(){this._preferences.next(i)}applyPreferences(e){o(this.platformId)&&(localStorage.setItem(l,JSON.stringify(e)),localStorage.setItem(f,e.theme),document.body.classList.toggle("compact-mode",e.density==="compact"),document.documentElement.setAttribute("data-theme",e.theme),document.body.setAttribute("data-theme",e.theme))}static \u0275fac=function(r){return new(r||n)(h(d))};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})};export{m as a};

import{a as Je}from"./chunk-BO7IAN5G.js";import{b as Ze}from"./chunk-3HLEAFFT.js";import{a as Le,b as Fe,c as Be,d as Ne,e as qe,f as Qe,g as Ge,h as Ue,i as je,j as Ae,k as We,l as Ke,m as Re,o as ae}from"./chunk-MNG7ZBL7.js";import{a as z}from"./chunk-WFTZEEYA.js";import{a as J,b as Z,c as q,d as _e,e as ye,f as He,g as Ye,h as Ce,i as se,l as Q,m as Xe}from"./chunk-LX3RFNK4.js";import{a as ze}from"./chunk-V42CKKVT.js";import"./chunk-GIJA7IEW.js";import{a as Ve}from"./chunk-CELKLN6V.js";import{b as T}from"./chunk-7L4EOTHW.js";import"./chunk-224KP37M.js";import{a as ne,n as Ee}from"./chunk-MQVH6ZV5.js";import"./chunk-OR3LRC23.js";import{Bb as c,Bc as D,Cb as Te,Cc as I,Db as ke,F as Oe,Hc as $e,Ib as re,J as te,Ka as i,Kb as A,Mc as M,Nb as d,Ob as h,P as u,Pb as X,Q as y,X as Ie,Ya as w,_b as De,aa as O,bb as l,bc as m,cc as g,ec as oe,fa as fe,g as we,ga as he,ha as S,hb as ie,l as Me,nb as r,ob as s,pb as o,q as k,qb as p,r as B,ub as C,vb as x,xb as ve,y as Se,zb as be}from"./chunk-V4EMFQCR.js";import{a as H,b as Y}from"./chunk-EQDQRRRY.js";var at=2e3,xe=5e3,b=t=>typeof t=="number"&&Number.isFinite(t)?t:null,$=(t,n)=>({label:t,value:n.value,unit:n.unit}),ee=(t,n,e)=>({label:t,value:n.value,unit:n.unit,tone:e}),le=class t{store=O(Ee);preferences=O(Ve);signalK=O(ze);networkStatus=O(Je);errorSubject=new we(null);tick$=Se(0,1e3);errorMessage$=this.errorSubject.asObservable();prefs$=this.preferences.preferences$.pipe(u({bufferSize:1,refCount:!0}));position$=Fe(this.store).pipe(u({bufferSize:1,refCount:!0}));positionValue$=this.position$.pipe(k(n=>this.extractPosition(n)),y(null),u({bufferSize:1,refCount:!0}));sog$=Be(this.store).pipe(u({bufferSize:1,refCount:!0}));cog$=Ne(this.store).pipe(u({bufferSize:1,refCount:!0}));heading$=qe(this.store).pipe(u({bufferSize:1,refCount:!0}));depth$=Qe(this.store).pipe(u({bufferSize:1,refCount:!0}));aws$=Ge(this.store).pipe(u({bufferSize:1,refCount:!0}));awa$=Ue(this.store).pipe(u({bufferSize:1,refCount:!0}));tws$=je(this.store).pipe(u({bufferSize:1,refCount:!0}));twd$=Ae(this.store).pipe(u({bufferSize:1,refCount:!0}));twa$=We(this.store).pipe(u({bufferSize:1,refCount:!0}));voltage$=Ke(this.store).pipe(u({bufferSize:1,refCount:!0}));current$=Re(this.store).pipe(u({bufferSize:1,refCount:!0}));sogSeries$=ae(this.store,ne.navigation.speedOverGround,120).pipe(y([]));depthSeries$=ae(this.store,ne.environment.depth.belowTransducer,120).pipe(y([]));windSeries$=ae(this.store,ne.environment.wind.speedApparent,120).pipe(y([]));voltageSeries$=ae(this.store,ne.electrical.batteries.house.voltage,120).pipe(y([]));hasData$=this.store.updatesProcessed$.pipe(k(n=>n>0),y(this.store.updatesProcessedSnapshot>0),te(),u({bufferSize:1,refCount:!0}));isLoading$=this.hasData$.pipe(k(n=>!n),te(),u({bufferSize:1,refCount:!0}));online$=this.networkStatus.online$.pipe(y(this.networkStatus.snapshot),te(),u({bufferSize:1,refCount:!0}));connected$=this.signalK.connected$.pipe(y(!1),te(),u({bufferSize:1,refCount:!0}));isCompact$=this.prefs$.pipe(k(n=>n.density==="compact"),y(this.preferences.snapshot.density==="compact"),u({bufferSize:1,refCount:!0}));fixLabel$=B([this.position$,this.tick$]).pipe(k(([n])=>{if(!n?.timestamp)return"dashboard.status.nofix";let e=Date.now()-n.timestamp;return e>xe?"dashboard.status.stale":(e<=at,"dashboard.status.fix")}),y("dashboard.status.nofix"),u({bufferSize:1,refCount:!0}));criticalStripVm$=B({sog:this.sog$,heading:this.heading$,depth:this.depth$,aws:this.aws$,awa:this.awa$,voltage:this.voltage$,prefs:this.prefs$,isLoading:this.isLoading$}).pipe(k(({sog:n,heading:e,depth:a,aws:f,awa:_,voltage:P,prefs:v,isLoading:E})=>{let U=Z(b(n?.value),v.speedUnit),L=q(b(e?.value)),R=_e(b(a?.value),v.depthUnit),F=Z(b(f?.value),v.speedUnit),j=ye(b(P?.value)),N=b(a?.value),tt=N===null?"neutral":N<=v.shallowThreshold?"alert":"ok",Pe=b(P?.value),nt=Pe===null?"neutral":Pe<12?"warn":"ok";return{items:[ee("dashboard.metrics.sog",U,"neutral"),ee("dashboard.metrics.hdg",L,"neutral"),ee("dashboard.metrics.depth",R,tt),ee("dashboard.metrics.aws",F,"neutral"),ee("dashboard.metrics.awa",{value:q(b(_?.value)).value,unit:"\xB0"},"neutral"),ee("dashboard.metrics.batt",j,nt)],isLoading:E}}),this.withFallback({items:[],isLoading:!0},"critical strip"),y({items:[],isLoading:!0}),u({bufferSize:1,refCount:!0}));navigationVm$=B({fixLabel:this.fixLabel$,position:this.positionValue$,sog:this.sog$,cog:this.cog$,heading:this.heading$,sogSeries:this.sogSeries$,prefs:this.prefs$,isLoading:this.isLoading$}).pipe(k(({fixLabel:n,position:e,sog:a,cog:f,heading:_,sogSeries:P,prefs:v,isLoading:E})=>{let U=Z(b(a?.value),v.speedUnit),L=q(b(f?.value)),R=q(b(_?.value));return{title:"dashboard.panels.navigation",fixLabel:n,statusTone:n==="dashboard.status.fix"?"ok":n==="dashboard.status.stale"?"warn":"alert",position:{lat:Ce(e?.latitude??null,"lat"),lon:Ce(e?.longitude??null,"lon")},metrics:[Y(H({},$("dashboard.metrics.sog",U)),{series:P}),$("dashboard.metrics.cog",L),$("dashboard.metrics.hdg",R)],isLoading:E}}),y({title:"dashboard.panels.navigation",fixLabel:"dashboard.status.nofix",statusTone:"alert",position:{lat:"--",lon:"--"},metrics:[],isLoading:!0}),this.withFallback({title:"dashboard.panels.navigation",fixLabel:"dashboard.status.nofix",statusTone:"alert",position:{lat:"--",lon:"--"},metrics:[],isLoading:!1},"navigation panel"),u({bufferSize:1,refCount:!0}));windVm$=B({aws:this.aws$,awa:this.awa$,tws:this.tws$,twd:this.twd$,twa:this.twa$,series:this.windSeries$,prefs:this.prefs$,isLoading:this.isLoading$}).pipe(k(({aws:n,awa:e,tws:a,twd:f,twa:_,series:P,prefs:v,isLoading:E})=>({title:"dashboard.panels.wind",metrics:[Y(H({},$("dashboard.metrics.aws",Z(b(n?.value),v.speedUnit))),{series:P}),$("dashboard.metrics.awa",q(b(e?.value))),$("dashboard.metrics.tws",Z(b(a?.value),v.speedUnit)),$("dashboard.metrics.twd",q(b(f?.value))),$("dashboard.metrics.twa",q(b(_?.value)))],primarySeries:P,updatedAt:Math.max(n?.timestamp??0,e?.timestamp??0,a?.timestamp??0,f?.timestamp??0,_?.timestamp??0)||null,isLoading:E})),y({title:"dashboard.panels.wind",metrics:[],updatedAt:null,isLoading:!0}),this.withFallback({title:"dashboard.panels.wind",metrics:[],updatedAt:null,isLoading:!1},"wind panel"),u({bufferSize:1,refCount:!0}));depthVm$=B({depth:this.depth$,series:this.depthSeries$,prefs:this.prefs$,isLoading:this.isLoading$}).pipe(k(({depth:n,series:e,prefs:a,isLoading:f})=>({title:"dashboard.panels.depth",metrics:[Y(H({},$("dashboard.metrics.depth",_e(b(n?.value),a.depthUnit))),{series:e})],series:e,updatedAt:n?.timestamp??null,isLoading:f})),y({title:"dashboard.panels.depth",metrics:[],updatedAt:null,isLoading:!0}),this.withFallback({title:"dashboard.panels.depth",metrics:[],updatedAt:null,isLoading:!1},"depth panel"),u({bufferSize:1,refCount:!0}));powerVm$=B({voltage:this.voltage$,current:this.current$,series:this.voltageSeries$,isLoading:this.isLoading$}).pipe(k(({voltage:n,current:e,series:a,isLoading:f})=>{let _=b(n?.value),P=b(e?.value),v=_!==null&&P!==null?_*P:null;return{title:"dashboard.panels.power",metrics:[Y(H({},$("dashboard.metrics.voltage",ye(_))),{series:a}),$("dashboard.metrics.current",He(P)),$("dashboard.metrics.power",Ye(v))],series:a,updatedAt:Math.max(n?.timestamp??0,e?.timestamp??0)||null,isLoading:f}}),y({title:"dashboard.panels.power",metrics:[],updatedAt:null,isLoading:!0}),this.withFallback({title:"dashboard.panels.power",metrics:[],updatedAt:null,isLoading:!1},"power panel"),u({bufferSize:1,refCount:!0}));systemVm$=B({lastUpdate:this.store.lastUpdate$,updates:this.store.updatesProcessed$,tick:this.tick$,online:this.online$,connected:this.connected$,hasData:this.hasData$,isLoading:this.isLoading$}).pipe(k(({lastUpdate:n,updates:e,online:a,connected:f,hasData:_,isLoading:P})=>{let v=n?Math.max(0,(Date.now()-n)/1e3):null,E=se(v,0),U=se(e,0),L=v!==null&&v*1e3>xe;return{title:"dashboard.panels.system",status:a?f?_?L?"dashboard.status.stale":"dashboard.status.streaming":"dashboard.status.waiting":"dashboard.status.disconnected":"dashboard.status.offline",statusTone:!a||!f?"alert":L?"warn":_?"ok":"neutral",lines:[{labelKey:"dashboard.system.updates_processed",value:U},{labelKey:"dashboard.system.last_update",value:`${E}s`}],isLoading:P}}),y({title:"dashboard.panels.system",status:"dashboard.status.waiting",statusTone:"neutral",lines:[],isLoading:!0}),this.withFallback({title:"dashboard.panels.system",status:"dashboard.status.error",statusTone:"alert",lines:[],isLoading:!1},"system panel"),u({bufferSize:1,refCount:!0}));statusVm$=B({online:this.online$,connected:this.connected$,hasData:this.hasData$,lastUpdate:this.store.lastUpdate$,tick:this.tick$}).pipe(k(({online:n,connected:e,hasData:a,lastUpdate:f})=>{let _=f?Math.max(0,(Date.now()-f)/1e3):null,P=_!==null?`${se(_,0)}s`:"--",v=_!==null&&_*1e3>xe,E=!n,U=n&&!e,L=!a,R=n&&e&&a&&!v,F="LIVE",j=`Last update ${P} ago`,N="ok";return E?(F="OFFLINE",j="No network connection",N="alert"):U?(F="DISCONNECTED",j="Signal K websocket unavailable",N="alert"):L?(F="CONNECTING",j="Waiting for first data update",N="neutral"):v&&(F="STALE",j=`Last update ${P} ago`,N="warn"),{label:F,detail:j,tone:N,isOffline:E,isStale:v,isLoading:L,isVisible:!R}}),y({label:"CONNECTING",detail:"Waiting for first data update",tone:"neutral",isOffline:!1,isStale:!1,isLoading:!0,isVisible:!0}),this.withFallback({label:"STATUS ERROR",detail:"Unable to read connection status",tone:"alert",isOffline:!1,isStale:!1,isLoading:!1,isVisible:!0},"status banner"),u({bufferSize:1,refCount:!0}));toggleDensity(){this.preferences.toggleDensity()}clearError(){this.errorSubject.next(null)}extractPosition(n){return!n?.value||!Le(n.value)?null:n.value}withFallback(n,e){return a=>a.pipe(Oe(f=>(this.reportError(e,f),Me(Y(H({},n),{error:`Unable to load ${e}.`})))))}reportError(n,e){let a=e instanceof Error?e.message:String(e);console.error(`[Dashboard] ${n} error`,e),this.errorSubject.next(`Dashboard ${n} error: ${a}`)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=Ie({token:t,factory:t.\u0275fac,providedIn:"root"})};function it(t,n){if(t&1&&(p(0,"app-instrument-card",4),m(1,"translate")),t&2){let e=n.$implicit,a=c(2);r("label",g(1,4,e.label))("value",e.value)("unit",e.unit)("status",a.getCardStatus(e.tone))}}function rt(t,n){if(t&1&&(s(0,"div",2),l(1,it,2,6,"app-instrument-card",3),o()),t&2){let e=c();i(),r("ngForOf",e.vm.items)("ngForTrackBy",e.trackByLabel)}}function ot(t,n){t&1&&p(0,"div",7)}function st(t,n){if(t&1&&(s(0,"div",5),l(1,ot,1,0,"div",6),o()),t&2){let e=c();i(),r("ngForOf",e.placeholders)("ngForTrackBy",e.trackByIndex)}}var pe=class t{vm;placeholders=Array.from({length:6});trackByLabel(n,e){return e.label}trackByIndex(n){return n}getCardStatus(n){switch(n){case"alert":return"error";case"warn":return"warning";case"ok":return"success";case"neutral":return"neutral";default:return"neutral"}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-dashboard-critical-strip"]],inputs:{vm:"vm"},decls:3,vars:2,consts:[["loading",""],["class","strip",4,"ngIf","ngIfElse"],[1,"strip"],["class","strip-card",3,"label","value","unit","status",4,"ngFor","ngForOf","ngForTrackBy"],[1,"strip-card",3,"label","value","unit","status"],[1,"strip","strip--loading"],["class","tile-skeleton",4,"ngFor","ngForOf","ngForTrackBy"],[1,"tile-skeleton"]],template:function(e,a){if(e&1&&l(0,rt,2,2,"div",1)(1,st,2,2,"ng-template",null,0,oe),e&2){let f=re(2);r("ngIf",!a.vm.isLoading)("ngIfElse",f)}},dependencies:[M,D,I,Xe,T],styles:["[_nghost-%COMP%]{display:block;width:100%}.strip[_ngcontent-%COMP%]{display:flex;gap:12px;overflow-x:auto;padding-bottom:4px;scrollbar-width:none}.strip[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.strip-card[_ngcontent-%COMP%]{flex:1 0 auto;min-width:130px;align-self:stretch}.strip--loading[_ngcontent-%COMP%]{gap:10px}.tile-skeleton[_ngcontent-%COMP%]{width:120px;height:80px;border-radius:var(--radius-lg);background:linear-gradient(110deg,#ffffff0f,#ffffff29,#ffffff0f);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.4s ease infinite;border:1px solid var(--border-default);flex:0 0 auto}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}@media(prefers-reduced-motion:reduce){.tile-skeleton[_ngcontent-%COMP%]{animation:none}}"],changeDetection:0})};var lt=["*"];function pt(t,n){if(t&1&&(s(0,"span",12),d(1),o()),t&2){let e=c();i(),h(e.subtitle)}}function ct(t,n){if(t&1&&p(0,"span",13),t&2){let e=c();ie("data-quality",e.quality)}}function dt(t,n){if(t&1&&(s(0,"div",14),d(1),o()),t&2){let e=c();A("status-ok",e.statusTone==="ok")("status-warn",e.statusTone==="warn")("status-alert",e.statusTone==="alert"),i(),X(" ",e.statusLabel," ")}}function mt(t,n){t&1&&(C(0),ke(1),x())}function gt(t,n){if(t&1&&(s(0,"div",15),d(1),m(2,"translate"),o()),t&2){let e=c();i(),h(g(2,1,e.error||""))}}function ut(t,n){t&1&&(s(0,"div",16),p(1,"div",17),o())}var V=class t{title="";subtitle="";statusLabel="";statusTone="neutral";quality=null;loading=!1;error;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-shared-panel-card"]],inputs:{title:"title",subtitle:"subtitle",statusLabel:"statusLabel",statusTone:"statusTone",quality:"quality",loading:"loading",error:"error"},ngContentSelectors:lt,decls:14,vars:15,consts:[["errorState",""],[1,"card"],[1,"card-header"],[1,"title-group"],[1,"title"],["class","subtitle",4,"ngIf"],[1,"header-right"],["class","quality-dot",4,"ngIf"],["class","status-chip",3,"status-ok","status-warn","status-alert",4,"ngIf"],[1,"card-content"],[4,"ngIf","ngIfElse"],["class","card-overlay",4,"ngIf"],[1,"subtitle"],[1,"quality-dot"],[1,"status-chip"],[1,"error-message"],[1,"card-overlay"],[1,"loading-spinner"]],template:function(e,a){if(e&1&&(Te(),s(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4),d(4),o(),l(5,pt,2,1,"span",5),o(),s(6,"div",6),l(7,ct,1,1,"span",7)(8,dt,2,7,"div",8),o()(),s(9,"div",9),l(10,mt,2,0,"ng-container",10)(11,gt,3,3,"ng-template",null,0,oe),o(),l(13,ut,2,0,"div",11),o()),e&2){let f=re(12);A("is-loading",a.loading)("has-error",!!a.error)("quality-stale",a.quality==="stale")("quality-warn",a.quality==="warn"),i(4),h(a.title),i(),r("ngIf",a.subtitle),i(2),r("ngIf",a.quality),i(),r("ngIf",a.statusLabel),i(2),r("ngIf",!a.error)("ngIfElse",f),i(3),r("ngIf",a.loading&&!a.error)}},dependencies:[M,I,T],styles:['[_nghost-%COMP%]{display:block}.card[_ngcontent-%COMP%]{background:var(--gb-bg-panel);border:1px solid var(--gb-border-panel);border-radius:16px;padding:var(--space-4, 16px);box-shadow:var(--gb-shadow-instrument);height:100%;display:flex;flex-direction:column;gap:var(--space-3, 12px);position:relative;overflow:hidden;transition:border-color .4s ease,box-shadow .4s ease}[data-theme=night][_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.06),transparent);pointer-events:none}.card.quality-stale[_ngcontent-%COMP%]{border-color:rgba(var(--gb-data-stale-rgb),.35)}.card.quality-warn[_ngcontent-%COMP%]{border-color:rgba(var(--gb-data-warn-rgb),.35)}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.title[_ngcontent-%COMP%]{margin:0;font-family:Space Grotesk,sans-serif;font-size:.6rem;font-weight:700;text-transform:uppercase;letter-spacing:.16em;color:var(--gb-text-muted)}.subtitle[_ngcontent-%COMP%]{font-size:.8rem;color:var(--gb-text-muted)}.status-chip[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;font-family:Space Grotesk,system-ui,sans-serif;text-transform:uppercase;letter-spacing:.12em;padding:4px 10px;border-radius:999px;background:var(--gb-bg-glass);color:var(--gb-text-muted);border:1px solid var(--gb-border-panel)}.status-ok[_ngcontent-%COMP%]{color:var(--gb-data-good);border-color:rgba(var(--gb-data-good-rgb),.45)}.status-warn[_ngcontent-%COMP%]{color:var(--gb-data-warn);border-color:rgba(var(--gb-data-warn-rgb),.45)}.status-alert[_ngcontent-%COMP%]{color:var(--gb-data-stale);border-color:rgba(var(--gb-data-stale-rgb),.45)}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-2, 8px)}.quality-dot[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;flex-shrink:0}.quality-dot[data-quality=good][_ngcontent-%COMP%]{background:var(--gb-data-good);box-shadow:0 0 4px rgba(var(--gb-data-good-rgb),.6)}.quality-dot[data-quality=warn][_ngcontent-%COMP%]{background:var(--gb-data-warn)}.quality-dot[data-quality=stale][_ngcontent-%COMP%]{background:var(--gb-data-stale);animation:_ngcontent-%COMP%_gb-pulse-stale 1.5s infinite}.quality-dot[data-quality=missing][_ngcontent-%COMP%]{background:var(--gb-tick-major)}@keyframes _ngcontent-%COMP%_gb-pulse-stale{0%,to{opacity:1}50%{opacity:.3}}.card-content[_ngcontent-%COMP%]{flex:1}.card.is-loading[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{opacity:.4;filter:blur(1px);transition:opacity .3s ease,filter .3s ease}.card-overlay[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center;z-index:10;pointer-events:none}.loading-spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid var(--gb-border-panel);border-top-color:var(--gb-text-value);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:translate(-50%,-50%) rotate(360deg)}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spinner-spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spinner-spin{to{transform:rotate(360deg)}}.card.has-error[_ngcontent-%COMP%]{border-color:rgba(var(--gb-data-stale-rgb),.6)}.error-message[_ngcontent-%COMP%]{font-size:.9rem;color:var(--gb-text-value);background:rgba(var(--gb-data-stale-rgb),.12);border:1px solid rgba(var(--gb-data-stale-rgb),.4);padding:12px;border-radius:12px}.compact[_nghost-%COMP%]   .card[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{padding:var(--space-3, 12px);border-radius:14px;gap:var(--space-2, 8px)}'],changeDetection:0})};function ft(t,n){if(t&1&&(s(0,"div",14),p(1,"app-shared-sparkline",15),o()),t&2){let e=c().$implicit;i(),r("data",e.series)("width",80)("height",24)}}function ht(t,n){if(t&1&&(s(0,"div",7)(1,"div",8)(2,"span",9),d(3),m(4,"translate"),o(),s(5,"div",10)(6,"span",11),d(7),o(),s(8,"span",12),d(9),o()()(),l(10,ft,2,3,"div",13),o()),t&2){let e=n.$implicit;i(3),h(g(4,4,e.label)),i(4),h(e.value),i(2),h(e.unit),i(),r("ngIf",e.series&&e.series.length>0)}}var ce=class t{vm;trackByMetric(n,e){return e.label}get panelQuality(){return this.vm?this.vm.error?"stale":this.vm.isLoading?"warn":this._toneToQuality(this.vm.statusTone):"missing"}_toneToQuality(n){switch(n){case"ok":return"good";case"warn":return"warn";case"alert":return"stale";default:return"missing"}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-dashboard-navigation-panel"]],inputs:{vm:"vm"},decls:12,vars:14,consts:[[3,"title","statusLabel","statusTone","loading","error"],[1,"panel-bezel",3,"quality"],[1,"navigation-content"],[1,"position-display"],[1,"coord","gb-display-value","gb-display-value--sm"],[1,"metrics-list"],["class","metric-row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"metric-row"],[1,"metric-info"],[1,"metric-label","gb-instrument-label"],[1,"metric-value-group"],[1,"value","gb-display-value","gb-display-value--md"],[1,"unit","gb-display-unit"],["class","metric-trend",4,"ngIf"],[1,"metric-trend"],[3,"data","width","height"]],template:function(e,a){e&1&&(s(0,"app-shared-panel-card",0),m(1,"translate"),m(2,"translate"),s(3,"omi-gb-bezel",1)(4,"div",2)(5,"div",3)(6,"div",4),d(7),o(),s(8,"div",4),d(9),o()(),s(10,"div",5),l(11,ht,11,6,"div",6),o()()()()),e&2&&(r("title",g(1,10,a.vm.title))("statusLabel",g(2,12,a.vm.fixLabel))("statusTone",a.vm.statusTone)("loading",a.vm.isLoading)("error",a.vm.error),i(3),r("quality",a.panelQuality),i(4),h(a.vm.position.lat),i(2),h(a.vm.position.lon),i(2),r("ngForOf",a.vm.metrics)("ngForTrackBy",a.trackByMetric))},dependencies:[M,D,I,V,z,Q,T],styles:[".panel-bezel[_ngcontent-%COMP%]{display:block;height:100%}.navigation-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;gap:1rem}.position-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:1rem;background:color-mix(in srgb,var(--gb-bg-glass) 55%,transparent);border-radius:16px;border:1px solid var(--gb-border-panel);gap:.5rem}.coord[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--gb-text-value);letter-spacing:.05em;font-weight:500;text-shadow:0 0 10px rgba(0,0,0,.1);font-variant-numeric:tabular-nums}.metrics-list[_ngcontent-%COMP%]{display:block;flex:1}.metric-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;padding:.75rem 0;border-bottom:1px dashed var(--gb-border-panel)}.metric-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.metric-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.metric-label[_ngcontent-%COMP%]{color:var(--gb-text-muted)}.metric-value-group[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.5rem}.value[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:500;color:var(--gb-text-value);line-height:1;letter-spacing:-.02em;font-variant-numeric:tabular-nums}.unit[_ngcontent-%COMP%]{color:var(--gb-text-unit)}.metric-trend[_ngcontent-%COMP%]{margin-bottom:4px}.compact[_nghost-%COMP%]   .position-display[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .position-display[_ngcontent-%COMP%]{padding:.5rem;gap:0}.compact[_nghost-%COMP%]   .coord[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .coord[_ngcontent-%COMP%]{font-size:1.1rem}.compact[_nghost-%COMP%]   .value[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem}"],changeDetection:0})};function vt(t,n){if(t&1&&(s(0,"span",12),d(1),o()),t&2){let e=c().$implicit;i(),h(e.unit)}}function bt(t,n){if(t&1&&(s(0,"div",13),p(1,"app-shared-sparkline",14),o()),t&2){let e=c().$implicit;i(),r("data",e.series)("width",80)("height",24)}}function _t(t,n){if(t&1&&(s(0,"div",5)(1,"div",6)(2,"span",7),d(3),m(4,"translate"),o(),s(5,"div",8)(6,"span",9),d(7),o(),l(8,vt,2,1,"span",10),o()(),l(9,bt,2,3,"div",11),o()),t&2){let e=n.$implicit,a=c();i(3),h(g(4,6,e.label)),i(3),A("value--large",e.label==="dashboard.metrics.aws"||e.label==="AWS"),i(),X(" ",a.displayValue(e.value)," "),i(),r("ngIf",a.showUnit(e.value)),i(),r("ngIf",e.series&&e.series.length>0)}}var de=class t{qualityService=O(J);vm;trackByMetric(n,e){return e.label}get panelQuality(){return this.vm?this.vm.error?"stale":this.vm.isLoading?"warn":this.vm.metrics.length===0?"missing":this.qualityService.getQuality(this.vm.updatedAt??null):"missing"}get isUnavailable(){return this.panelQuality==="stale"||this.panelQuality==="missing"}displayValue(n){return this.isUnavailable?"---":n}showUnit(n){return this.isUnavailable?!1:n!=="--"&&n!=="---"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-dashboard-wind-panel"]],inputs:{vm:"vm"},decls:6,vars:8,consts:[[3,"title","loading","error"],[1,"panel-bezel",3,"quality"],[1,"wind-content"],[1,"metrics-list"],["class","metric-row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"metric-row"],[1,"metric-info"],[1,"metric-label","gb-instrument-label"],[1,"metric-value-group"],[1,"value","gb-display-value","gb-display-value--md"],["class","unit gb-display-unit",4,"ngIf"],["class","metric-trend",4,"ngIf"],[1,"unit","gb-display-unit"],[1,"metric-trend"],[3,"data","width","height"]],template:function(e,a){e&1&&(s(0,"app-shared-panel-card",0),m(1,"translate"),s(2,"omi-gb-bezel",1)(3,"div",2)(4,"div",3),l(5,_t,10,8,"div",4),o()()()()),e&2&&(r("title",g(1,6,a.vm.title))("loading",a.vm.isLoading)("error",a.vm.error),i(2),r("quality",a.panelQuality),i(3),r("ngForOf",a.vm.metrics)("ngForTrackBy",a.trackByMetric))},dependencies:[M,D,I,V,z,Q,T],styles:[".panel-bezel[_ngcontent-%COMP%]{display:block;height:100%}.wind-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.metrics-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}.metric-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;padding-bottom:.5rem;border-bottom:1px dashed var(--gb-border-panel)}.metric-row[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.metric-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.metric-label[_ngcontent-%COMP%]{color:var(--gb-text-muted);margin-bottom:.25rem}.metric-value-group[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.5rem}.value[_ngcontent-%COMP%]{font-size:2rem;font-weight:500;color:var(--gb-text-value);line-height:.9;font-variant-numeric:tabular-nums}.metric-row[_ngcontent-%COMP%]:first-child   .value[_ngcontent-%COMP%]{font-size:3rem;letter-spacing:-.04em}.unit[_ngcontent-%COMP%]{color:var(--gb-text-unit)}.metric-trend[_ngcontent-%COMP%]{margin-bottom:6px;opacity:.6}.compact[_nghost-%COMP%]   .value[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.8rem}.compact[_nghost-%COMP%]   .metric-row[_ngcontent-%COMP%]:first-child   .value[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .metric-row[_ngcontent-%COMP%]:first-child   .value[_ngcontent-%COMP%]{font-size:2.5rem}"],changeDetection:0})};function yt(t,n){if(t&1&&(s(0,"span",9),d(1),o()),t&2){let e=c().$implicit;i(),h(e.unit)}}function Ct(t,n){if(t&1&&(s(0,"div",10),p(1,"app-shared-sparkline",11),o()),t&2){let e=c(2);i(),r("data",e.vm.series)("width",240)("height",60)}}function xt(t,n){if(t&1&&(s(0,"div",4)(1,"div",5)(2,"span",6),d(3),o(),l(4,yt,2,1,"span",7),o(),l(5,Ct,2,3,"div",8),o()),t&2){let e=n.$implicit,a=c();i(3),h(a.displayValue(e.value)),i(),r("ngIf",a.showUnit(e.value)),i(),r("ngIf",a.vm.series&&a.vm.series.length>0)}}var me=class t{qualityService=O(J);vm;trackByMetric(n,e){return e.label}get panelQuality(){return this.vm?this.vm.error?"stale":this.vm.isLoading?"warn":this.vm.metrics.length===0?"missing":this.qualityService.getQuality(this.vm.updatedAt??null):"missing"}get isUnavailable(){return this.panelQuality==="stale"||this.panelQuality==="missing"}displayValue(n){return this.isUnavailable?"---":n}showUnit(n){return this.isUnavailable?!1:n!=="--"&&n!=="---"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-dashboard-depth-panel"]],inputs:{vm:"vm"},decls:5,vars:8,consts:[[3,"title","loading","error"],[1,"panel-bezel",3,"quality"],[1,"depth-content"],["class","main-metric",4,"ngFor","ngForOf","ngForTrackBy"],[1,"main-metric"],[1,"metric-value-group"],[1,"value","gb-display-value","gb-display-value--xl"],["class","unit gb-display-unit",4,"ngIf"],["class","trend-container",4,"ngIf"],[1,"unit","gb-display-unit"],[1,"trend-container"],["stroke","var(--gb-data-good)",3,"data","width","height"]],template:function(e,a){e&1&&(s(0,"app-shared-panel-card",0),m(1,"translate"),s(2,"omi-gb-bezel",1)(3,"div",2),l(4,xt,6,3,"div",3),o()()()),e&2&&(r("title",g(1,6,a.vm.title))("loading",a.vm.isLoading)("error",a.vm.error),i(2),r("quality",a.panelQuality),i(2),r("ngForOf",a.vm.metrics)("ngForTrackBy",a.trackByMetric))},dependencies:[M,D,I,V,z,Q,T],styles:[".panel-bezel[_ngcontent-%COMP%]{display:block;height:100%}.depth-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.main-metric[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;align-items:center;justify-content:center;flex:1}.metric-value-group[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.5rem;margin-top:-1rem}.value[_ngcontent-%COMP%]{font-size:clamp(3.5rem,10vw,5.5rem);font-weight:500;color:var(--gb-text-value);line-height:.9;letter-spacing:-.05em;text-shadow:0 4px 12px rgba(0,0,0,.12);font-variant-numeric:tabular-nums}.unit[_ngcontent-%COMP%]{color:var(--gb-text-unit);transform:translateY(-1rem)}.trend-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;opacity:.6;margin-top:1rem}.compact[_nghost-%COMP%]   .value[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .value[_ngcontent-%COMP%]{font-size:4rem}.compact[_nghost-%COMP%]   .unit[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:1.1rem}.compact[_nghost-%COMP%]   .main-metric[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .main-metric[_ngcontent-%COMP%]{gap:.5rem}"],changeDetection:0})};function Pt(t,n){if(t&1&&(s(0,"span",12),d(1),o()),t&2){let e=c().$implicit;i(),h(e.unit)}}function wt(t,n){if(t&1&&(s(0,"div",13),p(1,"app-shared-sparkline",14),o()),t&2){let e=c().$implicit;i(),r("data",e.series)("width",80)("height",24)}}function Mt(t,n){if(t&1&&(s(0,"div",5)(1,"div",6)(2,"span",7),d(3),m(4,"translate"),o(),s(5,"div",8)(6,"span",9),d(7),o(),l(8,Pt,2,1,"span",10),o()(),l(9,wt,2,3,"div",11),o()),t&2){let e=n.$implicit,a=c();i(3),h(g(4,4,e.label)),i(4),h(a.displayValue(e.value)),i(),r("ngIf",a.showUnit(e.value)),i(),r("ngIf",e.series&&e.series.length>0)}}var ge=class t{qualityService=O(J);vm;trackByMetric(n,e){return e.label}get panelQuality(){return this.vm?this.vm.error?"stale":this.vm.isLoading?"warn":this.vm.metrics.length===0?"missing":this.qualityService.getQuality(this.vm.updatedAt??null):"missing"}get isUnavailable(){return this.panelQuality==="stale"||this.panelQuality==="missing"}displayValue(n){return this.isUnavailable?"---":n}showUnit(n){return this.isUnavailable?!1:n!=="--"&&n!=="---"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-dashboard-power-panel"]],inputs:{vm:"vm"},decls:6,vars:8,consts:[[3,"title","loading","error"],[1,"panel-bezel",3,"quality"],[1,"power-content"],[1,"metrics-list"],["class","metric-row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"metric-row"],[1,"metric-info"],[1,"metric-label","gb-instrument-label"],[1,"metric-value-group"],[1,"value","gb-display-value","gb-display-value--md"],["class","unit gb-display-unit",4,"ngIf"],["class","metric-trend",4,"ngIf"],[1,"unit","gb-display-unit"],[1,"metric-trend"],[3,"data","width","height"]],template:function(e,a){e&1&&(s(0,"app-shared-panel-card",0),m(1,"translate"),s(2,"omi-gb-bezel",1)(3,"div",2)(4,"div",3),l(5,Mt,10,6,"div",4),o()()()()),e&2&&(r("title",g(1,6,a.vm.title))("loading",a.vm.isLoading)("error",a.vm.error),i(2),r("quality",a.panelQuality),i(3),r("ngForOf",a.vm.metrics)("ngForTrackBy",a.trackByMetric))},dependencies:[M,D,I,V,z,Q,T],styles:[".panel-bezel[_ngcontent-%COMP%]{display:block;height:100%}.power-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.metrics-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;height:100%}.metric-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;border-bottom:1px dashed var(--gb-border-panel);flex:1}.metric-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.metric-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.metric-label[_ngcontent-%COMP%]{color:var(--gb-text-muted)}.metric-value-group[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.5rem}.value[_ngcontent-%COMP%]{font-size:2rem;font-weight:500;color:var(--gb-text-value);line-height:1;font-variant-numeric:tabular-nums}.unit[_ngcontent-%COMP%]{color:var(--gb-text-unit)}.metric-trend[_ngcontent-%COMP%]{flex-shrink:0;opacity:.7}.compact[_nghost-%COMP%]   .metric-row[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .metric-row[_ngcontent-%COMP%]{padding:.5rem 0}.compact[_nghost-%COMP%]   .value[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.6rem}"],changeDetection:0})};function St(t,n){if(t&1&&(s(0,"div",4),d(1),m(2,"translate"),s(3,"span",5),d(4),o()()),t&2){let e=n.$implicit;i(),X(" ",g(2,2,e.labelKey),": "),i(3),h(e.value)}}var ue=class t{vm;trackByLine(n,e){return e.labelKey}get panelQuality(){return this.vm?this.vm.error?"stale":this.vm.isLoading?"warn":this._toneToQuality(this.vm.statusTone):"missing"}_toneToQuality(n){switch(n){case"ok":return"good";case"warn":return"warn";case"alert":return"stale";default:return"missing"}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-dashboard-system-panel"]],inputs:{vm:"vm"},decls:6,vars:12,consts:[[3,"title","statusLabel","statusTone","loading","error"],[1,"panel-bezel",3,"quality"],[1,"system-content"],["class","status-line gb-display-value gb-display-value--sm",4,"ngFor","ngForOf","ngForTrackBy"],[1,"status-line","gb-display-value","gb-display-value--sm"],[1,"status-value"]],template:function(e,a){e&1&&(s(0,"app-shared-panel-card",0),m(1,"translate"),m(2,"translate"),s(3,"omi-gb-bezel",1)(4,"div",2),l(5,St,5,4,"div",3),o()()()),e&2&&(r("title",g(1,8,a.vm.title))("statusLabel",g(2,10,a.vm.status))("statusTone",a.vm.statusTone)("loading",a.vm.isLoading)("error",a.vm.error),i(3),r("quality",a.panelQuality),i(2),r("ngForOf",a.vm.lines)("ngForTrackBy",a.trackByLine))},dependencies:[M,D,V,z,T],styles:['.panel-bezel[_ngcontent-%COMP%]{display:block;height:100%}.system-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;background:color-mix(in srgb,var(--gb-bg-glass) 70%,transparent);border-radius:8px;padding:.75rem;border:1px solid var(--gb-border-panel);height:100%;width:100%;overflow-y:auto}.status-line[_ngcontent-%COMP%]{font-size:.85rem;color:var(--gb-text-muted);line-height:1.5;border-bottom:1px solid color-mix(in srgb,var(--gb-border-panel) 50%,transparent);padding:2px 0;font-variant-numeric:tabular-nums}.status-value[_ngcontent-%COMP%]{color:var(--gb-text-value)}.status-line[_ngcontent-%COMP%]:last-child{border-bottom:none}[data-theme="day"][_nghost-%COMP%]   .system-content[_ngcontent-%COMP%], [data-theme="day"]   [_nghost-%COMP%]   .system-content[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--gb-bg-glass) 85%,transparent)}.compact[_nghost-%COMP%]   .system-content[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .system-content[_ngcontent-%COMP%]{padding:.5rem}.compact[_nghost-%COMP%]   .status-line[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .status-line[_ngcontent-%COMP%]{font-size:.75rem}'],changeDetection:0})};var Ot=(t,n)=>({compact:t,layout:n});function It(t,n){t&1&&(S(),p(0,"rect",20))}function Tt(t,n){t&1&&(S(),p(0,"rect",21))}function kt(t,n){t&1&&(S(),p(0,"rect",22))}function Dt(t,n){t&1&&(S(),p(0,"rect",23))}function $t(t,n){t&1&&(S(),p(0,"rect",24))}function Vt(t,n){t&1&&(S(),p(0,"rect",25))}function Et(t,n){t&1&&(S(),p(0,"rect",26))}function zt(t,n){t&1&&(S(),p(0,"rect",27))}function Lt(t,n){t&1&&(S(),p(0,"rect",28))}function Ft(t,n){t&1&&(S(),p(0,"rect",29))}function Bt(t,n){t&1&&(S(),p(0,"rect",30))}function Nt(t,n){t&1&&(S(),p(0,"rect",31))}function qt(t,n){t&1&&(S(),p(0,"rect",32))}function Qt(t,n){if(t&1&&(C(0),p(1,"app-dashboard-critical-strip",33),x()),t&2){let e=n.ngIf;i(),r("vm",e)}}function Gt(t,n){if(t&1){let e=ve();s(0,"div",35)(1,"span"),d(2),o(),s(3,"button",36),be("click",function(){fe(e);let f=c(3);return he(f.dismissError())}),d(4,"Dismiss"),o()()}if(t&2){let e=c().ngIf;i(2),h(e)}}function Ut(t,n){if(t&1&&(C(0),l(1,Gt,5,1,"div",34),x()),t&2){let e=n.ngIf;i(),r("ngIf",e)}}function jt(t,n){if(t&1&&(s(0,"div",38),p(1,"span",39),s(2,"div",40)(3,"span",41),d(4),o(),s(5,"span",42),d(6),o()()()),t&2){let e=c().ngIf;A("status-ok",e.tone==="ok")("status-warn",e.tone==="warn")("status-alert",e.tone==="alert")("status-neutral",e.tone==="neutral"),i(4),h(e.label),i(2),h(e.detail)}}function At(t,n){if(t&1&&(C(0),l(1,jt,7,10,"div",37),x()),t&2){let e=n.ngIf;i(),r("ngIf",e.isVisible)}}function Wt(t,n){if(t&1&&(C(0),p(1,"app-dashboard-navigation-panel",44),x()),t&2){let e=n.ngIf;i(),r("vm",e)}}function Kt(t,n){if(t&1&&(C(0),l(1,Wt,2,1,"ng-container",0),m(2,"async"),x()),t&2){let e=c(3);i(),r("ngIf",g(2,1,e.navigationVm$))}}function Rt(t,n){if(t&1&&(C(0),p(1,"app-dashboard-wind-panel",45),x()),t&2){let e=n.ngIf;i(),r("vm",e)}}function Ht(t,n){if(t&1&&(C(0),l(1,Rt,2,1,"ng-container",0),m(2,"async"),x()),t&2){let e=c(3);i(),r("ngIf",g(2,1,e.windVm$))}}function Yt(t,n){if(t&1&&(C(0),p(1,"app-dashboard-depth-panel",46),x()),t&2){let e=n.ngIf;i(),r("vm",e)}}function Xt(t,n){if(t&1&&(C(0),l(1,Yt,2,1,"ng-container",0),m(2,"async"),x()),t&2){let e=c(3);i(),r("ngIf",g(2,1,e.depthVm$))}}function Jt(t,n){if(t&1&&(C(0),p(1,"app-dashboard-power-panel",47),x()),t&2){let e=n.ngIf;i(),r("vm",e)}}function Zt(t,n){if(t&1&&(C(0),l(1,Jt,2,1,"ng-container",0),m(2,"async"),x()),t&2){let e=c(3);i(),r("ngIf",g(2,1,e.powerVm$))}}function en(t,n){if(t&1&&(C(0),p(1,"app-dashboard-system-panel",48),x()),t&2){let e=n.ngIf;i(),r("vm",e)}}function tn(t,n){if(t&1&&(C(0),l(1,en,2,1,"ng-container",0),m(2,"async"),x()),t&2){let e=c(3);i(),r("ngIf",g(2,1,e.systemVm$))}}function nn(t,n){if(t&1&&(s(0,"div",43),l(1,Kt,3,3,"ng-container",0)(2,Ht,3,3,"ng-container",0)(3,Xt,3,3,"ng-container",0)(4,Zt,3,3,"ng-container",0)(5,tn,3,3,"ng-container",0),o()),t&2){let e=n.ngIf,a=c(2);i(),r("ngIf",a.isVisible(e,"navigation-card")),i(),r("ngIf",a.isVisible(e,"wind-card")),i(),r("ngIf",a.isVisible(e,"depth-card")),i(),r("ngIf",a.isVisible(e,"power-card")),i(),r("ngIf",a.isVisible(e,"system-card"))}}function an(t,n){if(t&1){let e=ve();C(0),s(1,"div",1)(2,"div",2)(3,"h1"),d(4,"Dashboard"),o(),s(5,"div",3)(6,"button",4),be("click",function(){fe(e);let f=c();return he(f.toggleDensity())}),S(),s(7,"svg",5),l(8,It,1,0,"rect",6)(9,Tt,1,0,"rect",7)(10,kt,1,0,"rect",8)(11,Dt,1,0,"rect",9)(12,$t,1,0,"rect",10)(13,Vt,1,0,"rect",11)(14,Et,1,0,"rect",12)(15,zt,1,0,"rect",13)(16,Lt,1,0,"rect",14)(17,Ft,1,0,"rect",15)(18,Bt,1,0,"rect",16)(19,Nt,1,0,"rect",17)(20,qt,1,0,"rect",18),o()()()(),l(21,Qt,2,1,"ng-container",0),m(22,"async"),l(23,Ut,2,1,"ng-container",0),m(24,"async"),l(25,At,2,1,"ng-container",0),m(26,"async"),l(27,nn,6,5,"div",19),o(),x()}if(t&2){let e=n.ngIf,a=c();i(6),r("title",e.compact?"Switch to Comfortable":"Switch to Compact"),ie("aria-label",e.compact?"Switch to Comfortable":"Switch to Compact"),i(2),r("ngIf",!e.compact),i(),r("ngIf",!e.compact),i(),r("ngIf",!e.compact),i(),r("ngIf",!e.compact),i(),r("ngIf",e.compact),i(),r("ngIf",e.compact),i(),r("ngIf",e.compact),i(),r("ngIf",e.compact),i(),r("ngIf",e.compact),i(),r("ngIf",e.compact),i(),r("ngIf",e.compact),i(),r("ngIf",e.compact),i(),r("ngIf",e.compact),i(),r("ngIf",g(22,19,a.criticalVm$)),i(2),r("ngIf",g(24,21,a.errorMessage$)),i(2),r("ngIf",g(26,23,a.statusVm$)),i(2),r("ngIf",e.layout==null?null:e.layout.widgets)}}var et=class t{facade=O(le);layoutService=O(Ze);isCompact$=this.facade.isCompact$;layout$=this.layoutService.layout$;criticalVm$=this.facade.criticalStripVm$;navigationVm$=this.facade.navigationVm$;windVm$=this.facade.windVm$;depthVm$=this.facade.depthVm$;powerVm$=this.facade.powerVm$;systemVm$=this.facade.systemVm$;statusVm$=this.facade.statusVm$;errorMessage$=this.facade.errorMessage$;toggleDensity(){this.facade.toggleDensity()}dismissError(){this.facade.clearError()}isVisible(n,e){return n.find(a=>a.id===e)?.visible??!1}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-dashboard-page"]],decls:3,vars:8,consts:[[4,"ngIf"],[1,"dashboard"],[1,"dashboard-header"],[1,"dashboard-actions"],["type","button",1,"density-toggle",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","3","y","3","width","7","height","7",4,"ngIf"],["x","14","y","3","width","7","height","7",4,"ngIf"],["x","3","y","14","width","7","height","7",4,"ngIf"],["x","14","y","14","width","7","height","7",4,"ngIf"],["x","3","y","3","width","4","height","4",4,"ngIf"],["x","10","y","3","width","4","height","4",4,"ngIf"],["x","17","y","3","width","4","height","4",4,"ngIf"],["x","3","y","10","width","4","height","4",4,"ngIf"],["x","10","y","10","width","4","height","4",4,"ngIf"],["x","17","y","10","width","4","height","4",4,"ngIf"],["x","3","y","17","width","4","height","4",4,"ngIf"],["x","10","y","17","width","4","height","4",4,"ngIf"],["x","17","y","17","width","4","height","4",4,"ngIf"],["class","panel-grid",4,"ngIf"],["x","3","y","3","width","7","height","7"],["x","14","y","3","width","7","height","7"],["x","3","y","14","width","7","height","7"],["x","14","y","14","width","7","height","7"],["x","3","y","3","width","4","height","4"],["x","10","y","3","width","4","height","4"],["x","17","y","3","width","4","height","4"],["x","3","y","10","width","4","height","4"],["x","10","y","10","width","4","height","4"],["x","17","y","10","width","4","height","4"],["x","3","y","17","width","4","height","4"],["x","10","y","17","width","4","height","4"],["x","17","y","17","width","4","height","4"],[1,"critical-strip",3,"vm"],["class","error-banner",4,"ngIf"],[1,"error-banner"],["type","button",1,"error-dismiss",3,"click"],["class","status-banner",3,"status-ok","status-warn","status-alert","status-neutral",4,"ngIf"],[1,"status-banner"],[1,"status-dot"],[1,"status-text"],[1,"status-label"],[1,"status-detail"],[1,"panel-grid"],[1,"panel","navigation",3,"vm"],[1,"panel","wind",3,"vm"],[1,"panel","depth",3,"vm"],[1,"panel","power",3,"vm"],[1,"panel","system",3,"vm"]],template:function(e,a){e&1&&(l(0,an,28,25,"ng-container",0),m(1,"async"),m(2,"async")),e&2&&r("ngIf",De(5,Ot,g(1,1,a.isCompact$),g(2,3,a.layout$)))},dependencies:[M,I,pe,ce,de,me,ge,ue,$e],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}.dashboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden;background:var(--gb-bg-canvas)}.dashboard-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:var(--space-4) var(--space-5);border-bottom:1px solid var(--gb-border-panel);background:var(--gb-bg-bezel);flex-shrink:0}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:1rem;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:var(--gb-text-muted);margin:0}.dashboard-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-2)}.critical-strip[_ngcontent-%COMP%]{flex:0 0 auto}.status-banner[_ngcontent-%COMP%], .error-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3);padding:var(--space-3) var(--space-4);border-radius:12px;background:var(--gb-bg-panel);border:1px solid var(--gb-border-panel);box-shadow:var(--gb-shadow-instrument);margin:0 var(--space-4)}.status-banner[_ngcontent-%COMP%]{position:relative}.status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:999px;background:var(--gb-text-muted);box-shadow:0 0 10px #0003}.status-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.status-label[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:.6rem;font-weight:700;text-transform:uppercase;letter-spacing:.16em;color:var(--gb-text-muted)}.status-detail[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:.875rem;color:var(--gb-text-value)}.status-ok[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:var(--gb-data-good);box-shadow:0 0 10px rgba(var(--gb-data-good-rgb),.6)}.status-warn[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:var(--gb-data-warn);box-shadow:0 0 10px rgba(var(--gb-data-warn-rgb),.6)}.status-alert[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:var(--gb-data-stale);box-shadow:0 0 10px rgba(var(--gb-data-stale-rgb),.6);animation:_ngcontent-%COMP%_pulse-alert 2s infinite}@keyframes _ngcontent-%COMP%_pulse-alert{0%{box-shadow:0 0 rgba(var(--gb-data-stale-rgb),.7)}70%{box-shadow:0 0 0 10px rgba(var(--gb-data-stale-rgb),0)}to{box-shadow:0 0 rgba(var(--gb-data-stale-rgb),0)}}.status-neutral[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:var(--gb-text-muted)}.error-banner[_ngcontent-%COMP%]{border-color:rgba(var(--gb-data-stale-rgb),.6);background:linear-gradient(120deg,rgba(var(--gb-data-stale-rgb),.15),transparent);color:var(--gb-text-value);justify-content:space-between}.error-dismiss[_ngcontent-%COMP%]{border:1px solid rgba(var(--gb-data-stale-rgb),.6);background:rgba(var(--gb-data-stale-rgb),.1);color:var(--gb-text-value);padding:4px 10px;border-radius:999px;cursor:pointer;font-family:Space Grotesk,sans-serif;font-size:.65rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em}.panel-grid[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--space-4);display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--space-3);align-content:start}.navigation[_ngcontent-%COMP%], .system[_ngcontent-%COMP%]{grid-column:span 2}.panel[_ngcontent-%COMP%]{min-height:200px;animation:_ngcontent-%COMP%_panelIn .35s ease both}.panel[_ngcontent-%COMP%]:nth-child(1){animation-delay:.05s}.panel[_ngcontent-%COMP%]:nth-child(2){animation-delay:.1s}.panel[_ngcontent-%COMP%]:nth-child(3){animation-delay:.15s}.panel[_ngcontent-%COMP%]:nth-child(4){animation-delay:.2s}.panel[_ngcontent-%COMP%]:nth-child(5){animation-delay:.25s}@keyframes _ngcontent-%COMP%_panelIn{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}@media(prefers-reduced-motion:reduce){.panel[_ngcontent-%COMP%]{animation:none}}@media(min-width:1200px){.panel-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media(max-width:640px){.panel-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:var(--space-3)}.navigation[_ngcontent-%COMP%], .system[_ngcontent-%COMP%]{grid-column:span 1}.panel[_ngcontent-%COMP%]{min-height:170px}.status-banner[_ngcontent-%COMP%], .error-banner[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin:0 var(--space-3)}}.density-toggle[_ngcontent-%COMP%]{position:fixed;bottom:1rem;right:1rem;width:44px;height:44px;background:var(--gb-bg-panel);border:1px solid var(--gb-border-panel);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--gb-text-muted);box-shadow:var(--gb-shadow-instrument);transition:all .2s ease;z-index:100}.density-toggle[_ngcontent-%COMP%]:hover{color:var(--gb-text-value);transform:scale(1.05)}@media(max-width:600px){.density-toggle[_ngcontent-%COMP%]{width:40px;height:40px;bottom:.75rem;right:.75rem}}"],changeDetection:0})};export{et as DashboardPage};

import{a as $}from"./chunk-KRD4IU53.js";import{d as z,i as U,o as R,p as L,q as V,v as G}from"./chunk-GIRLNUDQ.js";import{a as T}from"./chunk-OR3LRC23.js";import{$a as D,Bb as m,Bc as A,Cc as y,Ka as l,Kb as E,Lc as B,Mc as v,Nb as s,Ob as f,Pb as _,Ya as C,bb as d,bc as h,cc as O,dc as F,fa as P,ga as I,na as u,nb as g,ob as i,pb as r,qb as x,xb as k,zb as p}from"./chunk-V4EMFQCR.js";var S=(n=>(n[n.UnderWayUsingEngine=0]="UnderWayUsingEngine",n[n.AtAnchor=1]="AtAnchor",n[n.NotUnderCommand=2]="NotUnderCommand",n[n.RestrictedManeuverability=3]="RestrictedManeuverability",n[n.ConstrainedByDraft=4]="ConstrainedByDraft",n[n.Moored=5]="Moored",n[n.Aground=6]="Aground",n[n.EngagedInFishing=7]="EngagedInFishing",n[n.UnderWaySailing=8]="UnderWaySailing",n[n.Reserved9=9]="Reserved9",n[n.Reserved10=10]="Reserved10",n[n.Reserved11=11]="Reserved11",n[n.Reserved12=12]="Reserved12",n[n.Reserved13=13]="Reserved13",n[n.AISSART=14]="AISSART",n[n.NotDefined=15]="NotDefined",n))(S||{});var M=class o{transform(a,e="nm"){if(a==null||!Number.isFinite(a))return"--";if(e==="m")return`${a.toFixed(0)} m`;let t=a/1852;return t>=10?`${t.toFixed(1)} nm`:`${t.toFixed(2)} nm`}static \u0275fac=function(e){return new(e||o)};static \u0275pipe=D({name:"distance",type:o,pure:!0})};function K(o,a){o&1&&(i(0,"span",12),s(1,"DANGEROUS"),r())}function Q(o,a){if(o&1&&(i(0,"span"),s(1),h(2,"distance"),r()),o&2){let e=m();l(),_("CPA: ",O(2,1,e.target.cpa))}}function X(o,a){if(o&1&&(i(0,"span"),s(1),h(2,"number"),r()),o&2){let e=m();l(),_("",F(2,1,e.target.sog,"1.1-1")," kn")}}var w=class o{target;selected=!1;clicked=new u;getIconName(){if(this.target.isDangerous)return"alert-triangle";switch(this.target.state){case 1:case 5:return"anchor";default:return"navigation"}}getStatusLabel(){if(this.target.state===void 0)return"Unknown";switch(this.target.state){case 0:return"Underway (Eng)";case 1:return"Anchored";case 2:return"NUC";case 3:return"Restricted";case 4:return"Constrained";case 5:return"Moored";case 6:return"Aground";case 7:return"Fishing";case 8:return"Sailing";default:return S[this.target.state]??"Unknown"}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-ais-target-item"]],inputs:{target:"target",selected:"selected"},outputs:{clicked:"clicked"},decls:17,vars:17,consts:[[1,"ais-item",3,"click"],[1,"ais-icon-col"],["size","24",3,"name"],[1,"ais-info"],[1,"ais-header"],[1,"ais-name"],["class","ais-badge",4,"ngIf"],[1,"ais-details"],[4,"ngIf"],[1,"ais-meta"],[1,"ais-status"],[1,"ais-recency"],[1,"ais-badge"]],template:function(e,t){e&1&&(i(0,"div",0),p("click",function(){return t.clicked.emit()}),i(1,"div",1),x(2,"app-icon",2),r(),i(3,"div",3)(4,"div",4)(5,"span",5),s(6),r(),d(7,K,2,0,"span",6),r(),i(8,"div",7),d(9,Q,3,3,"span",8)(10,X,3,4,"span",8),r()(),i(11,"div",9)(12,"span",10),s(13),r(),i(14,"span",11),s(15),h(16,"timeAgo"),r()()()),e&2&&(E("selected",t.selected)("dangerous",t.target.isDangerous),l(2),E("text-danger",t.target.isDangerous)("text-primary",!t.target.isDangerous),g("name",t.getIconName()),l(4),f(t.target.name||t.target.mmsi),l(),g("ngIf",t.target.isDangerous),l(2),g("ngIf",t.target.cpa!==void 0&&t.target.cpa!==null),l(),g("ngIf",t.target.sog!==void 0),l(3),f(t.getStatusLabel()),l(2),f(O(16,15,t.target.lastUpdated)))},dependencies:[v,y,T,B,$,M],styles:[".ais-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem;gap:.75rem;background:var(--gb-bg-bezel);border-bottom:1px solid var(--gb-border-panel);cursor:pointer;transition:background-color .2s}.ais-item[_ngcontent-%COMP%]:hover{background:var(--gb-bg-panel)}.ais-item.selected[_ngcontent-%COMP%]{background:var(--surface-active);border-left:3px solid var(--gb-needle-secondary)}.ais-item.dangerous[_ngcontent-%COMP%]{border-left:3px solid var(--danger)}.ais-icon-col[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.ais-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem;min-width:0}.ais-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.ais-name[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ais-badge[_ngcontent-%COMP%]{font-size:.65rem;font-weight:700;background-color:var(--danger);color:#fff;padding:.1rem .3rem;border-radius:4px}.ais-details[_ngcontent-%COMP%]{display:flex;font-size:.8rem;color:var(--gb-text-muted);gap:.75rem}.ais-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;font-size:.75rem;color:var(--gb-text-muted);gap:.25rem}.text-danger[_ngcontent-%COMP%]{color:var(--danger)}.text-primary[_ngcontent-%COMP%]{color:var(--gb-text-value)}"],changeDetection:0})};function Y(o,a){if(o&1){let e=k();i(0,"div",19)(1,"span",20),s(2),r(),i(3,"button",21),p("click",function(){P(e);let c=m();return I(c.followTarget.emit(c.selectedMmsi))}),x(4,"app-icon",22),i(5,"span"),s(6,"Follow"),r()()()}if(o&2){let e=m();l(2),f(e.getSelectedName()),l(2),g("size",14)}}function Z(o,a){if(o&1){let e=k();i(0,"app-ais-target-item",23),p("clicked",function(){let c=P(e).$implicit,b=m();return I(b.selectTarget.emit(c.mmsi))}),r()}if(o&2){let e=a.$implicit,t=m();g("target",e)("selected",t.selectedMmsi===e.mmsi)}}function N(o,a){if(o&1&&(i(0,"div",24),x(1,"app-icon",25),i(2,"p"),s(3),r()()),o&2){let e=m();l(),g("size",48),l(2),f(e.targets.length===0?"No AIS targets in range":"No matches for filter")}}var W=class o{targets=[];selectedMmsi=null;sortBy="distance";selectTarget=new u;sortChange=new u;followTarget=new u;filterType="all";get filteredTargets(){return this.filterType==="all"?this.targets:this.targets.filter(a=>(a.vesselType??"").toLowerCase().includes(this.filterType))}getSelectedName(){if(!this.selectedMmsi)return"";let a=this.targets.find(e=>e.mmsi===this.selectedMmsi);return a?.name??a?.mmsi??""}onFilterChange(a){this.filterType=a}trackByMmsi(a,e){return e.mmsi||String(a)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-ais-target-list"]],inputs:{targets:"targets",selectedMmsi:"selectedMmsi",sortBy:"sortBy"},outputs:{selectTarget:"selectTarget",sortChange:"sortChange",followTarget:"followTarget"},decls:31,vars:7,consts:[[1,"ais-list"],[1,"ais-list-header"],[1,"ais-header-controls"],["title","Filter by vessel type",1,"ais-filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","cargo"],["value","passenger"],["value","fishing"],["value","pleasure"],["value","tug"],["value","sailing"],[1,"ais-sort-select",3,"ngModelChange","ngModel"],["value","cpa"],["value","distance"],["value","name"],["class","ais-follow-bar",4,"ngIf"],[1,"ais-list-scroll"],[3,"target","selected","clicked",4,"ngFor","ngForOf","ngForTrackBy"],["class","ais-empty",4,"ngIf"],[1,"ais-follow-bar"],[1,"ais-follow-label"],["title","Follow vessel on chart",1,"ais-follow-btn",3,"click"],["name","crosshair",3,"size"],[3,"clicked","target","selected"],[1,"ais-empty"],["name","target",1,"text-tertiary",3,"size"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"header",1)(2,"h3"),s(3),r(),i(4,"div",2)(5,"select",3),p("ngModelChange",function(b){return t.onFilterChange(b)}),i(6,"option",4),s(7,"All Types"),r(),i(8,"option",5),s(9,"Cargo"),r(),i(10,"option",6),s(11,"Passenger"),r(),i(12,"option",7),s(13,"Fishing"),r(),i(14,"option",8),s(15,"Pleasure"),r(),i(16,"option",9),s(17,"Tug"),r(),i(18,"option",10),s(19,"Sailing"),r()(),i(20,"select",11),p("ngModelChange",function(b){return t.sortChange.emit(b)}),i(21,"option",12),s(22,"Sort by CPA"),r(),i(23,"option",13),s(24,"Sort by Distance"),r(),i(25,"option",14),s(26,"Sort by Name"),r()()()(),d(27,Y,7,2,"div",15),i(28,"div",16),d(29,Z,1,2,"app-ais-target-item",17),r(),d(30,N,4,2,"div",18),r()),e&2&&(l(3),_("AIS Targets (",t.filteredTargets.length,")"),l(2),g("ngModel",t.filterType),l(15),g("ngModel",t.sortBy),l(7),g("ngIf",t.selectedMmsi),l(2),g("ngForOf",t.filteredTargets)("ngForTrackBy",t.trackByMmsi),l(),g("ngIf",t.filteredTargets.length===0))},dependencies:[v,A,y,w,T,G,L,V,R,z,U],styles:[`[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden;background:var(--gb-bg-canvas)}.ais-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.ais-list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;border-bottom:1px solid var(--gb-border-panel);background:var(--gb-bg-bezel)}.ais-list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-family:Space Grotesk,sans-serif;font-size:.85rem;font-weight:700;letter-spacing:.04em;color:var(--gb-text-value)}.ais-header-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.ais-filter-select[_ngcontent-%COMP%], .ais-sort-select[_ngcontent-%COMP%]{appearance:none;background:var(--gb-bg-bezel);border:1px solid var(--gb-border-panel);color:var(--gb-text-muted);padding:5px 28px 5px 10px;border-radius:8px;font-family:Space Grotesk,sans-serif;font-size:.75rem;font-weight:500;cursor:pointer;transition:border-color .15s ease;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%236b7a8d' fill='none' stroke-width='1.5'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 8px center}.ais-filter-select[_ngcontent-%COMP%]:focus, .ais-sort-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gb-border-active)}.ais-follow-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem;background:#4a90d914;border-bottom:1px solid rgba(74,144,217,.2)}.ais-follow-label[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:.82rem;font-weight:600;color:var(--gb-text-value);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ais-follow-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;font-family:Space Grotesk,sans-serif;font-size:.72rem;font-weight:700;letter-spacing:.03em;border:1px solid var(--gb-needle-secondary);border-radius:8px;background:#4a90d91f;color:var(--gb-needle-secondary);cursor:pointer;transition:background .15s ease;flex-shrink:0}.ais-follow-btn[_ngcontent-%COMP%]:hover{background:#4a90d940}.ais-list-scroll[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.ais-empty[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--gb-text-muted);gap:1rem}`],changeDetection:0})};export{S as a,M as b,W as c};

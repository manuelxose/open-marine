import{$ as r,Ca as l,Qc as h,X as n,g as o}from"./chunk-V4EMFQCR.js";import{a as i}from"./chunk-EQDQRRRY.js";var c=["cargo","tanker","passenger","fishing","sailing","pleasure","tug","military","hsc","other"],u={autoCenter:!0,showTrack:!0,showVector:!0,showTrueWind:!1,showRangeRings:!1,rangeRingIntervals:[.25,.5,1],showOpenSeaMap:!1,showAisTargets:!0,showAisLabels:!0,showCpaLines:!0,aisDisplayAge:"24h",visibleVesselTypes:[...c],trackDuration:"1d",showTemperature:!1,showWindSpeed:!1,showWaves:!1},g="omi-chart-settings",p=class a{constructor(e){this.platformId=e;if(h(this.platformId)){let t=localStorage.getItem(g);if(t)try{let s=JSON.parse(t);this.settingsSubject.next(i(i({},u),s))}catch(s){}this.settings$.subscribe(s=>{localStorage.setItem(g,JSON.stringify(s))})}}settingsSubject=new o(u);settings$=this.settingsSubject.asObservable();get snapshot(){return this.settingsSubject.value}toggleAutoCenter(){this.update({autoCenter:!this.settingsSubject.value.autoCenter})}toggleTrack(){this.update({showTrack:!this.settingsSubject.value.showTrack})}toggleVector(){this.update({showVector:!this.settingsSubject.value.showVector})}toggleTrueWind(){this.update({showTrueWind:!this.settingsSubject.value.showTrueWind})}enableAutoCenter(){this.settingsSubject.value.autoCenter||this.update({autoCenter:!0})}toggleRangeRings(){let e=this.settingsSubject.value;this.update({showRangeRings:!e.showRangeRings})}setRangeRingIntervals(e){this.update({rangeRingIntervals:e})}toggleOpenSeaMap(){this.update({showOpenSeaMap:!this.settingsSubject.value.showOpenSeaMap})}toggleAisTargets(){this.update({showAisTargets:!this.settingsSubject.value.showAisTargets})}toggleAisLabels(){this.update({showAisLabels:!this.settingsSubject.value.showAisLabels})}toggleCpaLines(){this.update({showCpaLines:!this.settingsSubject.value.showCpaLines})}setAisDisplayAge(e){this.update({aisDisplayAge:e})}toggleVesselType(e){let t=this.settingsSubject.value.visibleVesselTypes,s=t.includes(e)?t.filter(d=>d!==e):[...t,e];this.update({visibleVesselTypes:s})}setAllVesselTypes(e){this.update({visibleVesselTypes:e?[...c]:[]})}setTrackDuration(e){this.update({trackDuration:e})}toggleTemperature(){this.update({showTemperature:!this.settingsSubject.value.showTemperature})}toggleWindSpeed(){this.update({showWindSpeed:!this.settingsSubject.value.showWindSpeed})}toggleWaves(){this.update({showWaves:!this.settingsSubject.value.showWaves})}update(e){this.settingsSubject.next(i(i({},this.settingsSubject.value),e))}static \u0275fac=function(t){return new(t||a)(r(l))};static \u0275prov=n({token:a,factory:a.\u0275fac,providedIn:"root"})};export{p as a};

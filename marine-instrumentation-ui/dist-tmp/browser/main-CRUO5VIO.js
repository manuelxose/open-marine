import{a as Ci}from"./chunk-G4R5IVW6.js";import{a as gi}from"./chunk-A6R7SMKF.js";import{a as T,b as oe,c as mi,d as nn,e as di,f as Ae,g as ui,h as rn,i as hi,j as xe,k as _t,l as Ze,n as bi,o as St}from"./chunk-WXA46ZAL.js";import"./chunk-GWXASOFN.js";import"./chunk-M73UJ2M4.js";import{a as Si}from"./chunk-ZM7VQPQC.js";import{a as fi}from"./chunk-NV5BHWM3.js";import{a as ri,b as ai,c as oi,d as li,e as gt,f as je,g as ci,h as pi,i as yt}from"./chunk-CXUFKEQG.js";import{b as si}from"./chunk-ZNRZW4BI.js";import{a as vi}from"./chunk-V42CKKVT.js";import{a as yi,b as _i}from"./chunk-GIJA7IEW.js";import"./chunk-CELKLN6V.js";import"./chunk-IOWFGKQA.js";import"./chunk-224KP37M.js";import{a as Oe,n as vt}from"./chunk-MQVH6ZV5.js";import{a as bt}from"./chunk-OR3LRC23.js";import{$ as Pe,$a as ht,B as Se,Bb as A,Bc as ti,C as Ye,Ca as Qn,Cc as $e,Da as en,Hc as Ke,I as Be,Jb as Xn,Ka as b,Kb as se,Lc as ni,Mb as Jn,Mc as te,Nb as w,Oa as Wn,Ob as ee,Pb as Je,Q as ue,Qc as ii,R as Xe,Ra as Hn,Ta as Ve,U as C,V as $n,X as ge,Ya as H,_ as Kn,aa as x,ba as jn,bb as he,bc as k,cc as $,d as pt,dc as ft,e as mt,eb as Yn,fa as D,g as Me,ga as I,gb as tn,ha as R,hb as ye,ia as Q,ib as re,ja as Un,jb as ae,jc as Zn,ka as qn,kc as ei,na as ze,nb as B,oa as ut,ob as p,pb as u,q as N,qb as E,r as dt,ra as Gn,xb as U,z as Fe,zb as L}from"./chunk-V4EMFQCR.js";import{a as be,b as zn,c as Vn}from"./chunk-EQDQRRRY.js";function Ei(r){return new C(3e3,!1)}function Pr(){return new C(3100,!1)}function Ar(){return new C(3101,!1)}function xr(r){return new C(3001,!1)}function Or(r){return new C(3003,!1)}function kr(r){return new C(3004,!1)}function Ti(r,e){return new C(3005,!1)}function Mi(){return new C(3006,!1)}function Pi(){return new C(3007,!1)}function Ai(r,e){return new C(3008,!1)}function xi(r){return new C(3002,!1)}function Oi(r,e,t,n,i){return new C(3010,!1)}function ki(){return new C(3011,!1)}function Ni(){return new C(3012,!1)}function Di(){return new C(3200,!1)}function Ii(){return new C(3202,!1)}function Ri(){return new C(3013,!1)}function Li(r){return new C(3014,!1)}function Fi(r){return new C(3015,!1)}function Bi(r){return new C(3016,!1)}function zi(r,e){return new C(3404,!1)}function Nr(r){return new C(3502,!1)}function Vi(r){return new C(3503,!1)}function $i(){return new C(3300,!1)}function Ki(r){return new C(3504,!1)}function ji(r){return new C(3301,!1)}function Ui(r,e){return new C(3302,!1)}function qi(r){return new C(3303,!1)}function Gi(r,e){return new C(3400,!1)}function Qi(r){return new C(3401,!1)}function Wi(r){return new C(3402,!1)}function Hi(r,e){return new C(3505,!1)}function _e(r){switch(r.length){case 0:return new xe;case 1:return r[0];default:return new _t(r)}}function ln(r,e,t=new Map,n=new Map){let i=[],a=[],s=-1,o=null;if(e.forEach(l=>{let c=l.get("offset"),d=c==s,m=d&&o||new Map;l.forEach((S,y)=>{let f=y,v=S;if(y!=="offset")switch(f=r.normalizePropertyName(f,i),v){case Ze:v=t.get(y);break;case oe:v=n.get(y);break;default:v=r.normalizeStyleValue(y,f,v,i);break}m.set(f,v)}),d||a.push(m),o=m,s=c}),i.length)throw Nr(i);return a}function Ct(r,e,t,n){switch(e){case"start":r.onStart(()=>n(t&&an(t,"start",r)));break;case"done":r.onDone(()=>n(t&&an(t,"done",r)));break;case"destroy":r.onDestroy(()=>n(t&&an(t,"destroy",r)));break}}function an(r,e,t){let n=t.totalTime,i=!!t.disabled,a=Et(r.element,r.triggerName,r.fromState,r.toState,e||r.phaseName,n??r.totalTime,i),s=r._data;return s!=null&&(a._data=s),a}function Et(r,e,t,n,i="",a=0,s){return{element:r,triggerName:e,fromState:t,toState:n,phaseName:i,totalTime:a,disabled:!!s}}function Y(r,e,t){let n=r.get(e);return n||r.set(e,n=t),n}function cn(r){let e=r.indexOf(":"),t=r.substring(1,e),n=r.slice(e+1);return[t,n]}var Dr=typeof document>"u"?null:document.documentElement;function wt(r){let e=r.parentNode||r.host||null;return e===Dr?null:e}function Ir(r){return r.substring(1,6)=="ebkit"}var ke=null,wi=!1;function Yi(r){ke||(ke=Rr()||{},wi=ke.style?"WebkitAppearance"in ke.style:!1);let e=!0;return ke.style&&!Ir(r)&&(e=r in ke.style,!e&&wi&&(e="Webkit"+r.charAt(0).toUpperCase()+r.slice(1)in ke.style)),e}function Rr(){return typeof document<"u"?document.body:null}function pn(r,e){for(;e;){if(e===r)return!0;e=wt(e)}return!1}function mn(r,e,t){if(t)return Array.from(r.querySelectorAll(e));let n=r.querySelector(e);return n?[n]:[]}var Lr=1e3,dn="{{",Fr="}}",un="ng-enter",Tt="ng-leave",et="ng-trigger",tt=".ng-trigger",hn="ng-animating",Mt=".ng-animating";function fe(r){if(typeof r=="number")return r;let e=r.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:sn(parseFloat(e[1]),e[2])}function sn(r,e){return e==="s"?r*Lr:r}function nt(r,e,t){return r.hasOwnProperty("duration")?r:zr(r,e,t)}var Br=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function zr(r,e,t){let n,i=0,a="";if(typeof r=="string"){let s=r.match(Br);if(s===null)return e.push(Ei(r)),{duration:0,delay:0,easing:""};n=sn(parseFloat(s[1]),s[2]);let o=s[3];o!=null&&(i=sn(parseFloat(o),s[4]));let l=s[5];l&&(a=l)}else n=r;if(!t){let s=!1,o=e.length;n<0&&(e.push(Pr()),s=!0),i<0&&(e.push(Ar()),s=!0),s&&e.splice(o,0,Ei(r))}return{duration:n,delay:i,easing:a}}function Xi(r){return r.length?r[0]instanceof Map?r:r.map(e=>new Map(Object.entries(e))):[]}function le(r,e,t){e.forEach((n,i)=>{let a=Pt(i);t&&!t.has(i)&&t.set(i,r.style[a]),r.style[a]=n})}function Ce(r,e){e.forEach((t,n)=>{let i=Pt(n);r.style[i]=""})}function Ue(r){return Array.isArray(r)?r.length==1?r[0]:di(r):r}function Ji(r,e,t){let n=e.params||{},i=fn(r);i.length&&i.forEach(a=>{n.hasOwnProperty(a)||t.push(xr(a))})}var on=new RegExp(`${dn}\\s*(.+?)\\s*${Fr}`,"g");function fn(r){let e=[];if(typeof r=="string"){let t;for(;t=on.exec(r);)e.push(t[1]);on.lastIndex=0}return e}function qe(r,e,t){let n=`${r}`,i=n.replace(on,(a,s)=>{let o=e[s];return o==null&&(t.push(Or(s)),o=""),o.toString()});return i==n?r:i}var Vr=/-+([a-z0-9])/g;function Pt(r){return r.replace(Vr,(...e)=>e[1].toUpperCase())}function Zi(r,e){return r===0||e===0}function er(r,e,t){if(t.size&&e.length){let n=e[0],i=[];if(t.forEach((a,s)=>{n.has(s)||i.push(s),n.set(s,a)}),i.length)for(let a=1;a<e.length;a++){let s=e[a];i.forEach(o=>s.set(o,At(r,o)))}}return e}function X(r,e,t){switch(e.type){case T.Trigger:return r.visitTrigger(e,t);case T.State:return r.visitState(e,t);case T.Transition:return r.visitTransition(e,t);case T.Sequence:return r.visitSequence(e,t);case T.Group:return r.visitGroup(e,t);case T.Animate:return r.visitAnimate(e,t);case T.Keyframes:return r.visitKeyframes(e,t);case T.Style:return r.visitStyle(e,t);case T.Reference:return r.visitReference(e,t);case T.AnimateChild:return r.visitAnimateChild(e,t);case T.AnimateRef:return r.visitAnimateRef(e,t);case T.Query:return r.visitQuery(e,t);case T.Stagger:return r.visitStagger(e,t);default:throw kr(e.type)}}function At(r,e){return window.getComputedStyle(r)[e]}var Nn=(()=>{class r{validateStyleProperty(t){return Yi(t)}containsElement(t,n){return pn(t,n)}getParentElement(t){return wt(t)}query(t,n,i){return mn(t,n,i)}computeStyle(t,n,i){return i||""}animate(t,n,i,a,s,o=[],l){return new xe(i,a)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=ge({token:r,factory:r.\u0275fac})}return r})(),De=class{static NOOP=new Nn},Ie=class{};var $r=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Dt=class extends Ie{normalizePropertyName(e,t){return Pt(e)}normalizeStyleValue(e,t,n,i){let a="",s=n.toString().trim();if($r.has(t)&&n!==0&&n!=="0")if(typeof n=="number")a="px";else{let o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&o[1].length==0&&i.push(Ti(e,n))}return s+a}};var It="*";function Kr(r,e){let t=[];return typeof r=="string"?r.split(/\s*,\s*/).forEach(n=>jr(n,t,e)):t.push(r),t}function jr(r,e,t){if(r[0]==":"){let l=Ur(r,t);if(typeof l=="function"){e.push(l);return}r=l}let n=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(n==null||n.length<4)return t.push(Fi(r)),e;let i=n[1],a=n[2],s=n[3];e.push(tr(i,s));let o=i==It&&s==It;a[0]=="<"&&!o&&e.push(tr(s,i))}function Ur(r,e){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(Bi(r)),"* => *"}}var xt=new Set(["true","1"]),Ot=new Set(["false","0"]);function tr(r,e){let t=xt.has(r)||Ot.has(r),n=xt.has(e)||Ot.has(e);return(i,a)=>{let s=r==It||r==i,o=e==It||e==a;return!s&&t&&typeof i=="boolean"&&(s=i?xt.has(r):Ot.has(r)),!o&&n&&typeof a=="boolean"&&(o=a?xt.has(e):Ot.has(e)),s&&o}}var mr=":self",qr=new RegExp(`s*${mr}s*,?`,"g");function dr(r,e,t,n){return new Sn(r).build(e,t,n)}var nr="",Sn=class{_driver;constructor(e){this._driver=e}build(e,t,n){let i=new Cn(t);return this._resetContextStyleTimingState(i),X(this,Ue(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=nr,e.collectedStyles=new Map,e.collectedStyles.set(nr,new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,i=t.depCount=0,a=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(Mi()),e.definitions.forEach(o=>{if(this._resetContextStyleTimingState(t),o.type==T.State){let l=o,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,a.push(this.visitState(l,t))}),l.name=c}else if(o.type==T.Transition){let l=this.visitTransition(o,t);n+=l.queryCount,i+=l.depCount,s.push(l)}else t.errors.push(Pi())}),{type:T.Trigger,name:e.name,states:a,transitions:s,queryCount:n,depCount:i,options:null}}visitState(e,t){let n=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(n.containsDynamicStyles){let a=new Set,s=i||{};n.styles.forEach(o=>{o instanceof Map&&o.forEach(l=>{fn(l).forEach(c=>{s.hasOwnProperty(c)||a.add(c)})})}),a.size&&t.errors.push(Ai(e.name,[...a.values()]))}return{type:T.State,name:e.name,style:n,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let n=X(this,Ue(e.animation),t),i=Kr(e.expr,t.errors);return{type:T.Transition,matchers:i,animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Ne(e.options)}}visitSequence(e,t){return{type:T.Sequence,steps:e.steps.map(n=>X(this,n,t)),options:Ne(e.options)}}visitGroup(e,t){let n=t.currentTime,i=0,a=e.steps.map(s=>{t.currentTime=n;let o=X(this,s,t);return i=Math.max(i,t.currentTime),o});return t.currentTime=i,{type:T.Group,steps:a,options:Ne(e.options)}}visitAnimate(e,t){let n=Hr(e.timings,t.errors);t.currentAnimateTimings=n;let i,a=e.styles?e.styles:Ae({});if(a.type==T.Keyframes)i=this.visitKeyframes(a,t);else{let s=e.styles,o=!1;if(!s){o=!0;let c={};n.easing&&(c.easing=n.easing),s=Ae(c)}t.currentTime+=n.duration+n.delay;let l=this.visitStyle(s,t);l.isEmptyStep=o,i=l}return t.currentAnimateTimings=null,{type:T.Animate,timings:n,style:i,options:null}}visitStyle(e,t){let n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){let n=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let o of i)typeof o=="string"?o===oe?n.push(o):t.errors.push(xi(o)):n.push(new Map(Object.entries(o)));let a=!1,s=null;return n.forEach(o=>{if(o instanceof Map&&(o.has("easing")&&(s=o.get("easing"),o.delete("easing")),!a)){for(let l of o.values())if(l.toString().indexOf(dn)>=0){a=!0;break}}}),{type:T.Style,styles:n,easing:s,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){let n=t.currentAnimateTimings,i=t.currentTime,a=t.currentTime;n&&a>0&&(a-=n.duration+n.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l),m=!0;d&&(a!=i&&a>=d.startTime&&i<=d.endTime&&(t.errors.push(Oi(l,d.startTime,d.endTime,a,i)),m=!1),a=d.startTime),m&&c.set(l,{startTime:a,endTime:i}),t.options&&Ji(o,t.options,t.errors)})})}visitKeyframes(e,t){let n={type:T.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(ki()),n;let i=1,a=0,s=[],o=!1,l=!1,c=0,d=e.steps.map(F=>{let z=this._makeStyleAst(F,t),q=z.offset!=null?z.offset:Wr(z.styles),K=0;return q!=null&&(a++,K=z.offset=q),l=l||K<0||K>1,o=o||K<c,c=K,s.push(K),z});l&&t.errors.push(Ni()),o&&t.errors.push(Di());let m=e.steps.length,S=0;a>0&&a<m?t.errors.push(Ii()):a==0&&(S=i/(m-1));let y=m-1,f=t.currentTime,v=t.currentAnimateTimings,P=v.duration;return d.forEach((F,z)=>{let q=S>0?z==y?1:S*z:s[z],K=q*P;t.currentTime=f+v.delay+K,v.duration=K,this._validateStyleAst(F,t),F.offset=q,n.styles.push(F)}),n}visitReference(e,t){return{type:T.Reference,animation:X(this,Ue(e.animation),t),options:Ne(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:T.AnimateChild,options:Ne(e.options)}}visitAnimateRef(e,t){return{type:T.AnimateRef,animation:this.visitReference(e.animation,t),options:Ne(e.options)}}visitQuery(e,t){let n=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[a,s]=Gr(e.selector);t.currentQuerySelector=n.length?n+" "+a:a,Y(t.collectedStyles,t.currentQuerySelector,new Map);let o=X(this,Ue(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:T.Query,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:o,originalSelector:e.selector,options:Ne(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Ri());let n=e.timings==="full"?{duration:0,delay:0,easing:"full"}:nt(e.timings,t.errors,!0);return{type:T.Stagger,animation:X(this,Ue(e.animation),t),timings:n,options:null}}};function Gr(r){let e=!!r.split(/\s*,\s*/).find(t=>t==mr);return e&&(r=r.replace(qr,"")),r=r.replace(/@\*/g,tt).replace(/@\w+/g,t=>tt+"-"+t.slice(1)).replace(/:animating/g,Mt),[r,e]}function Qr(r){return r?be({},r):null}var Cn=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function Wr(r){if(typeof r=="string")return null;let e=null;if(Array.isArray(r))r.forEach(t=>{if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(r instanceof Map&&r.has("offset")){let t=r;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Hr(r,e){if(r.hasOwnProperty("duration"))return r;if(typeof r=="number"){let a=nt(r,e).duration;return gn(a,0,"")}let t=r;if(t.split(/\s+/).some(a=>a.charAt(0)=="{"&&a.charAt(1)=="{")){let a=gn(0,0,"");return a.dynamic=!0,a.strValue=t,a}let i=nt(t,e);return gn(i.duration,i.delay,i.easing)}function Ne(r){return r?(r=be({},r),r.params&&(r.params=Qr(r.params))):r={},r}function gn(r,e,t){return{duration:r,delay:e,easing:t}}function Dn(r,e,t,n,i,a,s=null,o=!1){return{type:1,element:r,keyframes:e,preStyleProps:t,postStyleProps:n,duration:i,delay:a,totalTime:i+a,easing:s,subTimeline:o}}var rt=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},Yr=1,Xr=":enter",Jr=new RegExp(Xr,"g"),Zr=":leave",ea=new RegExp(Zr,"g");function ur(r,e,t,n,i,a=new Map,s=new Map,o,l,c=[]){return new En().buildKeyframes(r,e,t,n,i,a,s,o,l,c)}var En=class{buildKeyframes(e,t,n,i,a,s,o,l,c,d=[]){c=c||new rt;let m=new wn(e,t,c,i,a,d,[]);m.options=l;let S=l.delay?fe(l.delay):0;m.currentTimeline.delayNextStep(S),m.currentTimeline.setStyles([s],null,m.errors,l),X(this,n,m);let y=m.timelines.filter(f=>f.containsAnimation());if(y.length&&o.size){let f;for(let v=y.length-1;v>=0;v--){let P=y[v];if(P.element===t){f=P;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([o],null,m.errors,l)}return y.length?y.map(f=>f.buildKeyframes()):[Dn(t,[],[],[],0,S,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let n=t.subInstructions.get(t.element);if(n){let i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,i,i.options);a!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(let i of e){let a=i?.delay;if(a){let s=typeof a=="number"?a:fe(qe(a,i?.params??{},t.errors));n.delayNextStep(s)}}}_visitSubInstructions(e,t,n){let a=t.currentTimeline.currentTime,s=n.duration!=null?fe(n.duration):null,o=n.delay!=null?fe(n.delay):null;return s!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,s,o);a=Math.max(a,c.duration+c.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),X(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let n=t.subContextCount,i=t,a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),a.delay!=null)){i.previousNode.type==T.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Rt);let s=fe(a.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>X(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let n=[],i=t.currentTimeline.currentTime,a=e.options&&e.options.delay?fe(e.options.delay):0;e.steps.forEach(s=>{let o=t.createSubContext(e.options);a&&o.delayNextStep(a),X(this,s,o),i=Math.max(i,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let n=e.strValue,i=t.params?qe(n,t.params,t.errors):n;return nt(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let n=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),i.snapshotCurrentStyles());let a=e.style;a.type==T.Keyframes?this.visitKeyframes(a,t):(t.incrementTime(n.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let n=t.currentTimeline,i=t.currentAnimateTimings;!i&&n.hasCurrentStyleProperties()&&n.forwardFrame();let a=i&&i.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(a):n.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let n=t.currentAnimateTimings,i=t.currentTimeline.duration,a=n.duration,o=t.createSubContext().currentTimeline;o.easing=n.easing,e.styles.forEach(l=>{let c=l.offset||0;o.forwardTime(c*a),o.setStyles(l.styles,l.easing,t.errors,t.options),o.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(o),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){let n=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?fe(i.delay):0;a&&(t.previousNode.type===T.Style||n==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Rt);let s=n,o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=o.length;let l=null;o.forEach((c,d)=>{t.currentQueryIndex=d;let m=t.createSubContext(e.options,c);a&&m.delayNextStep(a),c===t.element&&(l=m.currentTimeline),X(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe();let S=m.currentTimeline.currentTime;s=Math.max(s,S)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let n=t.parentContext,i=t.currentTimeline,a=e.timings,s=Math.abs(a.duration),o=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":l=o-l;break;case"full":l=n.currentStaggerTime;break}let d=t.currentTimeline;l&&d.delayNextStep(l);let m=d.currentTime;X(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=i.currentTime-m+(i.startTime-n.currentTimeline.startTime)}},Rt={},wn=class r{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Rt;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,n,i,a,s,o,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=a,this.errors=s,this.timelines=o,this.currentTimeline=l||new Lt(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let n=e,i=this.options;n.duration!=null&&(i.duration=fe(n.duration)),n.delay!=null&&(i.delay=fe(n.delay));let a=n.params;if(a){let s=i.params;s||(s=this.options.params={}),Object.keys(a).forEach(o=>{(!t||!s.hasOwnProperty(o))&&(s[o]=qe(a[o],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let n=e.params={};Object.keys(t).forEach(i=>{n[i]=t[i]})}}return e}createSubContext(e=null,t,n){let i=t||this.element,a=new r(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=Rt,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},a=new Tn(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,i,a,s){let o=[];if(i&&o.push(this.element),e.length>0){e=e.replace(Jr,"."+this._enterClassName),e=e.replace(ea,"."+this._leaveClassName);let l=n!=1,c=this._driver.query(this.element,e,l);n!==0&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),o.push(...c)}return!a&&o.length==0&&s.push(Li(t)),o}},Lt=class r{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,n,i){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new r(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Yr,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||oe),this._currentKeyframe.set(t,oe);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,i){t&&this._previousKeyframe.set("easing",t);let a=i&&i.params||{},s=ta(e,this._globalTimelineStyles);for(let[o,l]of s){let c=qe(l,a,n);this._pendingStyles.set(o,c),this._localTimelineStyles.has(o)||this._backFill.set(o,this._globalTimelineStyles.get(o)??oe),this._updateStyle(o,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{let i=this._styleSummary.get(n);(!i||t.time>i.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,n=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((o,l)=>{let c=new Map([...this._backFill,...o]);c.forEach((d,m)=>{d===Ze?e.add(m):d===oe&&t.add(m)}),n||c.set("offset",l/this.duration),i.push(c)});let a=[...e.values()],s=[...t.values()];if(n){let o=i[0],l=new Map(o);o.set("offset",0),l.set("offset",1),i=[o,l]}return Dn(this.element,i,a,s,this.duration,this.startTime,this.easing,!1)}},Tn=class extends Lt{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,n,i,a,s,o=!1){super(e,t,s.delay),this.keyframes=n,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let a=[],s=n+t,o=t/s,l=new Map(e[0]);l.set("offset",0),a.push(l);let c=new Map(e[0]);c.set("offset",ir(o)),a.push(c);let d=e.length-1;for(let m=1;m<=d;m++){let S=new Map(e[m]),y=S.get("offset"),f=t+y*n;S.set("offset",ir(f/s)),a.push(S)}n=s,t=0,i="",e=a}return Dn(this.element,e,this.preStyleProps,this.postStyleProps,n,t,i,!0)}};function ir(r,e=3){let t=Math.pow(10,e-1);return Math.round(r*t)/t}function ta(r,e){let t=new Map,n;return r.forEach(i=>{if(i==="*"){n??=e.keys();for(let a of n)t.set(a,oe)}else for(let[a,s]of i)t.set(a,s)}),t}function rr(r,e,t,n,i,a,s,o,l,c,d,m,S){return{type:0,element:r,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:n,toStyles:s,timelines:o,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:m,errors:S}}var yn={},Ft=class{_triggerName;ast;_stateStyles;constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,i){return na(this.ast.matchers,e,t,n,i)}buildStyles(e,t,n){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,n):new Map}build(e,t,n,i,a,s,o,l,c,d){let m=[],S=this.ast.options&&this.ast.options.params||yn,y=o&&o.params||yn,f=this.buildStyles(n,y,m),v=l&&l.params||yn,P=this.buildStyles(i,v,m),F=new Set,z=new Map,q=new Map,K=i==="void",Re={params:hr(v,S),delay:this.ast.options?.delay},me=d?[]:ur(e,t,this.ast.animation,a,s,f,P,Re,c,m),G=0;return me.forEach(W=>{G=Math.max(W.duration+W.delay,G)}),m.length?rr(t,this._triggerName,n,i,K,f,P,[],[],z,q,G,m):(me.forEach(W=>{let Ee=W.element,Le=Y(z,Ee,new Set);W.preStyleProps.forEach(we=>Le.add(we));let Rn=Y(q,Ee,new Set);W.postStyleProps.forEach(we=>Rn.add(we)),Ee!==t&&F.add(Ee)}),rr(t,this._triggerName,n,i,K,f,P,me,[...F.values()],z,q,G))}};function na(r,e,t,n,i){return r.some(a=>a(e,t,n,i))}function hr(r,e){let t=be({},e);return Object.entries(r).forEach(([n,i])=>{i!=null&&(t[n]=i)}),t}var Mn=class{styles;defaultParams;normalizer;constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){let n=new Map,i=hr(e,this.defaultParams);return this.styles.styles.forEach(a=>{typeof a!="string"&&a.forEach((s,o)=>{s&&(s=qe(s,i,t));let l=this.normalizer.normalizePropertyName(o,t);s=this.normalizer.normalizeStyleValue(o,l,s,t),n.set(o,s)})}),n}};function ia(r,e,t){return new Pn(r,e,t)}var Pn=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,t.states.forEach(i=>{let a=i.options&&i.options.params||{};this.states.set(i.name,new Mn(i.style,a,n))}),ar(this.states,"true","1"),ar(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Ft(e,i,this.states))}),this.fallbackTransition=ra(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,i){return this.transitionFactories.find(s=>s.match(e,t,n,i))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}};function ra(r,e,t){let n=[(s,o)=>!0],i={type:T.Sequence,steps:[],options:null},a={type:T.Transition,animation:i,matchers:n,options:null,queryCount:0,depCount:0};return new Ft(r,a,e)}function ar(r,e,t){r.has(e)?r.has(t)||r.set(t,r.get(e)):r.has(t)&&r.set(e,r.get(t))}var aa=new rt,An=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n}register(e,t){let n=[],i=[],a=dr(this._driver,t,n,i);if(n.length)throw Vi(n);this._animations.set(e,a)}_buildPlayer(e,t,n){let i=e.element,a=ln(this._normalizer,e.keyframes,t,n);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){let i=[],a=this._animations.get(e),s,o=new Map;if(a?(s=ur(this._driver,t,a,un,Tt,new Map,new Map,n,aa,i),s.forEach(d=>{let m=Y(o,d.element,new Map);d.postStyleProps.forEach(S=>m.set(S,null))})):(i.push($i()),s=[]),i.length)throw Ki(i);o.forEach((d,m)=>{d.forEach((S,y)=>{d.set(y,this._driver.computeStyle(m,y,oe))})});let l=s.map(d=>{let m=o.get(d.element);return this._buildPlayer(d,new Map,m)}),c=_e(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw ji(e);return t}listen(e,t,n,i){let a=Et(t,"","","");return Ct(this._getPlayer(e),n,a,i),()=>{}}command(e,t,n,i){if(n=="register"){this.register(e,i[0]);return}if(n=="create"){let s=i[0]||{};this.create(e,t,s);return}let a=this._getPlayer(e);switch(n){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},sr="ng-animate-queued",sa=".ng-animate-queued",_n="ng-animate-disabled",oa=".ng-animate-disabled",la="ng-star-inserted",ca=".ng-star-inserted",pa=[],fr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ma={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ce="__ng_removed",at=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let n=e&&e.hasOwnProperty("value"),i=n?e.value:e;if(this.value=ua(i),n){let a=e,{value:s}=a,o=Vn(a,["value"]);this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let n=this.options.params;Object.keys(t).forEach(i=>{n[i]==null&&(n[i]=t[i])})}}},it="void",vn=new at(it),xn=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this._hostClassName="ng-tns-"+e,ne(t,this._hostClassName)}listen(e,t,n,i){if(!this._triggers.has(t))throw Ui(n,t);if(n==null||n.length==0)throw qi(t);if(!ha(n))throw Gi(n,t);let a=Y(this._elementListeners,e,[]),s={name:t,phase:n,callback:i};a.push(s);let o=Y(this._engine.statesByElement,e,new Map);return o.has(t)||(ne(e,et),ne(e,et+"-"+t),o.set(t,vn)),()=>{this._engine.afterFlush(()=>{let l=a.indexOf(s);l>=0&&a.splice(l,1),this._triggers.has(t)||o.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Qi(e);return t}trigger(e,t,n,i=!0){let a=this._getTrigger(t),s=new st(this.id,t,e),o=this._engine.statesByElement.get(e);o||(ne(e,et),ne(e,et+"-"+t),this._engine.statesByElement.set(e,o=new Map));let l=o.get(t),c=new at(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),o.set(t,c),l||(l=vn),!(c.value===it)&&l.value===c.value){if(!ya(l.params,c.params)){let v=[],P=a.matchStyles(l.value,l.params,v),F=a.matchStyles(c.value,c.params,v);v.length?this._engine.reportError(v):this._engine.afterFlush(()=>{Ce(e,P),le(e,F)})}return}let S=Y(this._engine.playersByElement,e,[]);S.forEach(v=>{v.namespaceId==this.id&&v.triggerName==t&&v.queued&&v.destroy()});let y=a.matchTransition(l.value,c.value,e,c.params),f=!1;if(!y){if(!i)return;y=a.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:l,toState:c,player:s,isFallbackTransition:f}),f||(ne(e,sr),s.onStart(()=>{Ge(e,sr)})),s.onDone(()=>{let v=this.players.indexOf(s);v>=0&&this.players.splice(v,1);let P=this._engine.playersByElement.get(e);if(P){let F=P.indexOf(s);F>=0&&P.splice(F,1)}}),this.players.push(s),S.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let n=this._engine.driver.query(e,tt,!0);n.forEach(i=>{if(i[ce])return;let a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,n,i){let a=this._engine.statesByElement.get(e),s=new Map;if(a){let o=[];if(a.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let d=this.trigger(e,c,it,i);d&&o.push(d)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),n&&_e(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){let i=new Set;t.forEach(a=>{let s=a.name;if(i.has(s))return;i.add(s);let l=this._triggers.get(s).fallbackTransition,c=n.get(s)||vn,d=new at(it),m=new st(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:d,player:m,isFallbackTransition:!0})})}}removeNode(e,t){let n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(n.totalAnimations){let a=n.players.length?n.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(n.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)n.markElementAsRemoved(this.id,e,!1,t);else{let a=e[ce];(!a||a===fr)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){ne(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(n=>{let i=n.player;if(i.destroyed)return;let a=n.element,s=this._elementListeners.get(a);s&&s.forEach(o=>{if(o.name==n.triggerName){let l=Et(a,n.triggerName,n.fromState.value,n.toState.value);l._data=e,Ct(n.player,o.phase,l,o.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(n)}),this._queue=[],t.sort((n,i)=>{let a=n.transition.ast.depCount,s=i.transition.ast.depCount;return a==0||s==0?a-s:this._engine.driver.containsElement(n.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},On=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){let n=new xn(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){let n=this._namespaceList,i=this.namespacesByHostElement;if(n.length-1>=0){let s=!1,o=this.driver.getParentElement(t);for(;o;){let l=i.get(o);if(l){let c=n.indexOf(l);n.splice(c+1,0,e),s=!0;break}o=this.driver.getParentElement(o)}s||n.unshift(e)}else n.push(e);return i.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let i=this._namespaceLookup[e];i&&i.register(t,n)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let n=this._fetchNamespace(e);this.namespacesByHostElement.delete(n.hostElement);let i=this._namespaceList.indexOf(n);i>=0&&this._namespaceList.splice(i,1),n.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,n=this.statesByElement.get(e);if(n){for(let i of n.values())if(i.namespaceId){let a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}}return t}trigger(e,t,n,i){if(kt(t)){let a=this._fetchNamespace(e);if(a)return a.trigger(t,n,i),!0}return!1}insertNode(e,t,n,i){if(!kt(t))return;let a=t[ce];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,n)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ne(e,_n)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ge(e,_n))}removeNode(e,t,n){if(kt(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n);let a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,n)}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,n,i,a){this.collectedLeaveElements.push(t),t[ce]={namespaceId:e,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,n,i,a){return kt(t)?this._fetchNamespace(e).listen(t,n,i,a):()=>{}}_buildInstruction(e,t,n,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,tt,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Mt,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return _e(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ce];if(t&&t.setForRemoval){if(e[ce]=fr,t.namespaceId){this.destroyInnerAnimations(e);let n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(_n)&&this.markElementAsDisabled(e,!1),this.driver.query(e,oa,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,i)=>this._balanceNamespaceList(n,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++){let i=this.collectedEnterElements[n];ne(i,la)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let n=[];try{t=this._flushAnimations(n,e)}finally{for(let i=0;i<n.length;i++)n[i]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++){let i=this.collectedLeaveElements[n];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){let n=this._whenQuietFns;this._whenQuietFns=[],t.length?_e(t).onDone(()=>{n.forEach(i=>i())}):n.forEach(i=>i())}}reportError(e){throw Wi(e)}_flushAnimations(e,t){let n=new rt,i=[],a=new Map,s=[],o=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(h=>{d.add(h);let g=this.driver.query(h,sa,!0);for(let _=0;_<g.length;_++)d.add(g[_])});let m=this.bodyNode,S=Array.from(this.statesByElement.keys()),y=cr(S,this.collectedEnterElements),f=new Map,v=0;y.forEach((h,g)=>{let _=un+v++;f.set(g,_),h.forEach(M=>ne(M,_))});let P=[],F=new Set,z=new Set;for(let h=0;h<this.collectedLeaveElements.length;h++){let g=this.collectedLeaveElements[h],_=g[ce];_&&_.setForRemoval&&(P.push(g),F.add(g),_.hasAnimation?this.driver.query(g,ca,!0).forEach(M=>F.add(M)):z.add(g))}let q=new Map,K=cr(S,Array.from(F));K.forEach((h,g)=>{let _=Tt+v++;q.set(g,_),h.forEach(M=>ne(M,_))}),e.push(()=>{y.forEach((h,g)=>{let _=f.get(g);h.forEach(M=>Ge(M,_))}),K.forEach((h,g)=>{let _=q.get(g);h.forEach(M=>Ge(M,_))}),P.forEach(h=>{this.processLeaveNode(h)})});let Re=[],me=[];for(let h=this._namespaceList.length-1;h>=0;h--)this._namespaceList[h].drainQueuedTransitions(t).forEach(_=>{let M=_.player,V=_.element;if(Re.push(M),this.collectedEnterElements.length){let j=V[ce];if(j&&j.setForMove){if(j.previousTriggersValues&&j.previousTriggersValues.has(_.triggerName)){let Te=j.previousTriggersValues.get(_.triggerName),Z=this.statesByElement.get(_.element);if(Z&&Z.has(_.triggerName)){let ct=Z.get(_.triggerName);ct.value=Te,Z.set(_.triggerName,ct)}}M.destroy();return}}let de=!m||!this.driver.containsElement(m,V),J=q.get(V),ve=f.get(V),O=this._buildInstruction(_,n,ve,J,de);if(O.errors&&O.errors.length){me.push(O);return}if(de){M.onStart(()=>Ce(V,O.fromStyles)),M.onDestroy(()=>le(V,O.toStyles)),i.push(M);return}if(_.isFallbackTransition){M.onStart(()=>Ce(V,O.fromStyles)),M.onDestroy(()=>le(V,O.toStyles)),i.push(M);return}let Bn=[];O.timelines.forEach(j=>{j.stretchStartingKeyframe=!0,this.disabledNodes.has(j.element)||Bn.push(j)}),O.timelines=Bn,n.append(V,O.timelines);let Mr={instruction:O,player:M,element:V};s.push(Mr),O.queriedElements.forEach(j=>Y(o,j,[]).push(M)),O.preStyleProps.forEach((j,Te)=>{if(j.size){let Z=l.get(Te);Z||l.set(Te,Z=new Set),j.forEach((ct,Zt)=>Z.add(Zt))}}),O.postStyleProps.forEach((j,Te)=>{let Z=c.get(Te);Z||c.set(Te,Z=new Set),j.forEach((ct,Zt)=>Z.add(Zt))})});if(me.length){let h=[];me.forEach(g=>{h.push(Hi(g.triggerName,g.errors))}),Re.forEach(g=>g.destroy()),this.reportError(h)}let G=new Map,W=new Map;s.forEach(h=>{let g=h.element;n.has(g)&&(W.set(g,g),this._beforeAnimationBuild(h.player.namespaceId,h.instruction,G))}),i.forEach(h=>{let g=h.element;this._getPreviousPlayers(g,!1,h.namespaceId,h.triggerName,null).forEach(M=>{Y(G,g,[]).push(M),M.destroy()})});let Ee=P.filter(h=>pr(h,l,c)),Le=new Map;lr(Le,this.driver,z,c,oe).forEach(h=>{pr(h,l,c)&&Ee.push(h)});let we=new Map;y.forEach((h,g)=>{lr(we,this.driver,new Set(h),l,Ze)}),Ee.forEach(h=>{let g=Le.get(h),_=we.get(h);Le.set(h,new Map([...g?.entries()??[],..._?.entries()??[]]))});let Jt=[],Ln=[],Fn={};s.forEach(h=>{let{element:g,player:_,instruction:M}=h;if(n.has(g)){if(d.has(g)){_.onDestroy(()=>le(g,M.toStyles)),_.disabled=!0,_.overrideTotalTime(M.totalTime),i.push(_);return}let V=Fn;if(W.size>1){let J=g,ve=[];for(;J=J.parentNode;){let O=W.get(J);if(O){V=O;break}ve.push(J)}ve.forEach(O=>W.set(O,V))}let de=this._buildAnimation(_.namespaceId,M,G,a,we,Le);if(_.setRealPlayer(de),V===Fn)Jt.push(_);else{let J=this.playersByElement.get(V);J&&J.length&&(_.parentPlayer=_e(J)),i.push(_)}}else Ce(g,M.fromStyles),_.onDestroy(()=>le(g,M.toStyles)),Ln.push(_),d.has(g)&&i.push(_)}),Ln.forEach(h=>{let g=a.get(h.element);if(g&&g.length){let _=_e(g);h.setRealPlayer(_)}}),i.forEach(h=>{h.parentPlayer?h.syncPlayerEvents(h.parentPlayer):h.destroy()});for(let h=0;h<P.length;h++){let g=P[h],_=g[ce];if(Ge(g,Tt),_&&_.hasAnimation)continue;let M=[];if(o.size){let de=o.get(g);de&&de.length&&M.push(...de);let J=this.driver.query(g,Mt,!0);for(let ve=0;ve<J.length;ve++){let O=o.get(J[ve]);O&&O.length&&M.push(...O)}}let V=M.filter(de=>!de.destroyed);V.length?fa(this,g,V):this.processLeaveNode(g)}return P.length=0,Jt.forEach(h=>{this.players.push(h),h.onDone(()=>{h.destroy();let g=this.players.indexOf(h);this.players.splice(g,1)}),h.play()}),Jt}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,i,a){let s=[];if(t){let o=this.playersByQueriedElement.get(e);o&&(s=o)}else{let o=this.playersByElement.get(e);if(o){let l=!a||a==it;o.forEach(c=>{c.queued||!l&&c.triggerName!=i||s.push(c)})}}return(n||i)&&(s=s.filter(o=>!(n&&n!=o.namespaceId||i&&i!=o.triggerName))),s}_beforeAnimationBuild(e,t,n){let i=t.triggerName,a=t.element,s=t.isRemovalTransition?void 0:e,o=t.isRemovalTransition?void 0:i;for(let l of t.timelines){let c=l.element,d=c!==a,m=Y(n,c,[]);this._getPreviousPlayers(c,d,s,o,t.toState).forEach(y=>{let f=y.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),y.destroy(),m.push(y)})}Ce(a,t.fromStyles)}_buildAnimation(e,t,n,i,a,s){let o=t.triggerName,l=t.element,c=[],d=new Set,m=new Set,S=t.timelines.map(f=>{let v=f.element;d.add(v);let P=v[ce];if(P&&P.removedBeforeQueried)return new xe(f.duration,f.delay);let F=v!==l,z=ga((n.get(v)||pa).map(G=>G.getRealPlayer())).filter(G=>{let W=G;return W.element?W.element===v:!1}),q=a.get(v),K=s.get(v),Re=ln(this._normalizer,f.keyframes,q,K),me=this._buildPlayer(f,Re,z);if(f.subTimeline&&i&&m.add(v),F){let G=new st(e,o,v);G.setRealPlayer(me),c.push(G)}return me});c.forEach(f=>{Y(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>da(this.playersByQueriedElement,f.element,f))}),d.forEach(f=>ne(f,hn));let y=_e(S);return y.onDestroy(()=>{d.forEach(f=>Ge(f,hn)),le(l,t.toStyles)}),m.forEach(f=>{Y(i,f,[]).push(y)}),y}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new xe(e.duration,e.delay)}},st=class{namespaceId;triggerName;element;_player=new xe;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(i=>Ct(e,n,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Y(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function da(r,e,t){let n=r.get(e);if(n){if(n.length){let i=n.indexOf(t);n.splice(i,1)}n.length==0&&r.delete(e)}return n}function ua(r){return r??null}function kt(r){return r&&r.nodeType===1}function ha(r){return r=="start"||r=="done"}function or(r,e){let t=r.style.display;return r.style.display=e??"none",t}function lr(r,e,t,n,i){let a=[];t.forEach(l=>a.push(or(l)));let s=[];n.forEach((l,c)=>{let d=new Map;l.forEach(m=>{let S=e.computeStyle(c,m,i);d.set(m,S),(!S||S.length==0)&&(c[ce]=ma,s.push(c))}),r.set(c,d)});let o=0;return t.forEach(l=>or(l,a[o++])),s}function cr(r,e){let t=new Map;if(r.forEach(o=>t.set(o,[])),e.length==0)return t;let n=1,i=new Set(e),a=new Map;function s(o){if(!o)return n;let l=a.get(o);if(l)return l;let c=o.parentNode;return t.has(c)?l=c:i.has(c)?l=n:l=s(c),a.set(o,l),l}return e.forEach(o=>{let l=s(o);l!==n&&t.get(l).push(o)}),t}function ne(r,e){r.classList?.add(e)}function Ge(r,e){r.classList?.remove(e)}function fa(r,e,t){_e(t).onDone(()=>r.processLeaveNode(e))}function ga(r){let e=[];return gr(r,e),e}function gr(r,e){for(let t=0;t<r.length;t++){let n=r[t];n instanceof _t?gr(n.players,e):e.push(n)}}function ya(r,e){let t=Object.keys(r),n=Object.keys(e);if(t.length!=n.length)return!1;for(let i=0;i<t.length;i++){let a=t[i];if(!e.hasOwnProperty(a)||r[a]!==e[a])return!1}return!0}function pr(r,e,t){let n=t.get(r);if(!n)return!1;let i=e.get(r);return i?n.forEach(a=>i.add(a)):e.set(r,n),t.delete(r),!0}var Qe=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,n){this._driver=t,this._normalizer=n,this._transitionEngine=new On(e.body,t,n),this._timelineEngine=new An(e.body,t,n),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,n,i,a){let s=e+"-"+i,o=this._triggerCache[s];if(!o){let l=[],c=[],d=dr(this._driver,a,l,c);if(l.length)throw zi(i,l);o=ia(i,d,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,i,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,i){this._transitionEngine.insertNode(e,t,n,i)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,i){if(n.charAt(0)=="@"){let[a,s]=cn(n),o=i;this._timelineEngine.command(a,t,s,o)}else this._transitionEngine.trigger(e,t,n,i)}listen(e,t,n,i,a){if(n.charAt(0)=="@"){let[s,o]=cn(n);return this._timelineEngine.listen(s,t,o,a)}return this._transitionEngine.listen(e,t,n,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function _a(r,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=bn(e[0]),e.length>1&&(n=bn(e[e.length-1]))):e instanceof Map&&(t=bn(e)),t||n?new va(r,t,n):null}var va=(()=>{class r{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,n,i){this._element=t,this._startStyles=n,this._endStyles=i;let a=r.initialStylesByElement.get(t);a||r.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&le(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(le(this._element,this._initialStyles),this._endStyles&&(le(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(Ce(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ce(this._element,this._endStyles),this._endStyles=null),le(this._element,this._initialStyles),this._state=3)}}return r})();function bn(r){let e=null;return r.forEach((t,n)=>{ba(n)&&(e=e||new Map,e.set(n,t))}),e}function ba(r){return r==="display"||r==="position"}var Bt=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,n,i){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=i,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();return t.addEventListener("finish",n),this.onDestroy(()=>{t.removeEventListener("finish",n)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){let i=this._convertKeyframesToObject(t);try{return e.animate(i,n)}catch(a){return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,i)=>{i!=="offset"&&e.set(i,this._finished?n:At(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}},zt=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return pn(e,t)}getParentElement(e){return wt(e)}query(e,t,n){return mn(e,t,n)}computeStyle(e,t,n){return At(e,t)}animate(e,t,n,i,a,s=[]){let o=i==0?"both":"forwards",l={duration:n,delay:i,fill:o};a&&(l.easing=a);let c=new Map,d=s.filter(y=>y instanceof Bt);Zi(n,i)&&d.forEach(y=>{y.currentSnapshot.forEach((f,v)=>c.set(v,f))});let m=Xi(t).map(y=>new Map(y));m=er(e,m,c);let S=_a(e,m);return new Bt(e,m,l,S)}};var Nt="@",yr="@.disabled",Vt=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,n,i){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,i=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,n,i){if(i){this.delegate.removeChild(e,t,n,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,i){this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,i){this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==Nt&&t==yr?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n,i){return this.delegate.listen(e,t,n,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},kn=class extends Vt{factory;constructor(e,t,n,i,a){super(t,n,i,a),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==Nt?t.charAt(1)=="."&&t==yr?(n=n===void 0?!0:!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n,i){if(t.charAt(0)==Nt){let a=Sa(e),s=t.slice(1),o="";return s.charAt(0)!=Nt&&([s,o]=Ca(s)),this.engine.listen(this.namespaceId,a,s,o,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,n,l)})}return this.delegate.listen(e,t,n,i)}};function Sa(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}function Ca(r){let e=r.indexOf("."),t=r.substring(0,e),n=r.slice(e+1);return[t,n]}var $t=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,t.onRemovalComplete=(i,a)=>{a?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,d=c.get(i);if(!d){let m=()=>c.delete(i);d=new Vt("",i,this.engine,m),c.set(i,d)}return d}let a=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let o=c=>{Array.isArray(c)?c.forEach(o):this.engine.registerTrigger(a,s,e,c.name,c)};return t.data.animation.forEach(o),new kn(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(n));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(a=>{let[s,o]=a;s(o)}),this._animationCallbacksBuffer=[]})}),i.push([t,n])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var Ma=(()=>{class r extends Qe{constructor(t,n,i){super(t,n,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||r)(Pe(qn),Pe(De),Pe(Ie))};static \u0275prov=ge({token:r,factory:r.\u0275fac})}return r})();function Pa(){return new Dt}function Aa(){return new $t(x(ri),x(Qe),x(ut))}var _r=[{provide:Ie,useFactory:Pa},{provide:Qe,useClass:Ma},{provide:Hn,useFactory:Aa}],Ss=[{provide:De,useClass:Nn},{provide:en,useValue:"NoopAnimations"},..._r],xa=[{provide:De,useFactory:()=>new zt},{provide:en,useFactory:()=>"BrowserAnimations"},..._r];function vr(){return Wn("NgEagerAnimations"),[...xa]}var In="Service workers are disabled or not supported by this browser",We=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new pt(n=>n.error(new C(5601,!1)));else{let n=null,i=new mt;this.worker=new pt(c=>(n!==null&&c.next(n),i.subscribe(d=>c.next(d))));let a=()=>{let{controller:c}=e;c!==null&&(n=c,i.next(n))};e.addEventListener("controllerchange",a),a(),this.registration=this.worker.pipe(Xe(()=>e.getRegistration().then(c=>{if(!c)throw new C(5601,!1);return c})));let s=new mt;this.events=s.asObservable();let o=c=>{let{data:d}=c;d?.type&&s.next(d)};e.addEventListener("message",o),t?.get(tn,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",a),e.removeEventListener("message",o)})}}postMessage(e,t){return new Promise(n=>{this.worker.pipe(Be(1)).subscribe(i=>{i.postMessage(be({action:e},t)),n()})})}postMessageWithOperation(e,t,n){let i=this.waitForOperationCompleted(n),a=this.postMessage(e,t);return Promise.all([a,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=n=>n.type===e:t=n=>e.includes(n.type),this.events.pipe(Ye(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Be(1))}waitForOperationCompleted(e){return new Promise((t,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Ye(i=>i.nonce===e),Be(1),N(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:n})})}get isEnabled(){return!!this.serviceWorker}},Oa=(()=>{class r{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new mt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=Se,this.notificationClicks=Se,this.notificationCloses=Se,this.pushSubscriptionChanges=Se,this.subscription=Se;return}this.messages=this.sw.eventsOfType("PUSH").pipe(N(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(N(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(N(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(N(i=>i.data)),this.pushManager=this.sw.registration.pipe(N(i=>i.pushManager));let n=this.pushManager.pipe(Xe(i=>i.getSubscription()));this.subscription=new pt(i=>{let a=n.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{a.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(In));let n={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)a[s]=i.charCodeAt(s);return n.applicationServerKey=a,new Promise((s,o)=>{this.pushManager.pipe(Xe(l=>l.subscribe(n)),Be(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),s(l)},error:o})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(In));let t=n=>{if(n===null)throw new C(5602,!1);return n.unsubscribe().then(i=>{if(!i)throw new C(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,i)=>{this.subscription.pipe(Be(1),Xe(t)).subscribe({next:n,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(n){return new(n||r)(Pe(We))};static \u0275prov=ge({token:r,factory:r.\u0275fac})}return r})(),ka=(()=>{class r{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Se,this.unrecoverable=Se;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(In));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new C(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(n){return new(n||r)(Pe(We))};static \u0275prov=ge({token:r,factory:r.\u0275fac})}return r})(),Sr=new Kn("");function Na(){let r=x(ot);if(!("serviceWorker"in navigator&&r.enabled!==!1))return;let e=x(Sr),t=x(ut),n=x(tn);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,a=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",a),n.onDestroy(()=>{i.removeEventListener("controllerchange",a)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:a}=r;if(typeof a=="function")i=new Promise(s=>a().subscribe(()=>s()));else{let[s,...o]=(a||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=br(+o[0]||0);break;case"registerWhenStable":i=Promise.race([n.whenStable(),br(+o[0])]);break;default:throw new C(5600,!1)}}i.then(()=>{n.destroyed||navigator.serviceWorker.register(e,{scope:r.scope,updateViaCache:r.updateViaCache,type:r.type}).catch(s=>console.error($n(5604,!1)))})})}function br(r){return new Promise(e=>setTimeout(e,r))}function Da(){let r=x(ot),e=x(Un),t=!0;return new We(t&&r.enabled!==!1?navigator.serviceWorker:void 0,e)}var ot=class{enabled;updateViaCache;type;scope;registrationStrategy};function Cr(r,e={}){return jn([Oa,ka,{provide:Sr,useValue:r},{provide:ot,useValue:e},{provide:We,useFactory:Da},Yn(Na)])}var pe=()=>{let r=x(gi),e=x(gt);return r.isOnboarded()?!0:e.createUrlTree(["/onboarding/welcome"])};var Er=[{path:"",redirectTo:"chart",pathMatch:"full"},{path:"onboarding",loadChildren:()=>import("./chunk-VVZI2LIH.js")},{path:"chart",loadComponent:()=>import("./chunk-U3KDHUSB.js").then(r=>r.ChartPage),title:"Chart",canActivate:[pe]},{path:"dashboard",loadComponent:()=>import("./chunk-SHKPLDSV.js").then(r=>r.DashboardPage),title:"Dashboard",canActivate:[pe]},{path:"instruments",loadComponent:()=>import("./chunk-GCDVVE47.js").then(r=>r.InstrumentsPage),title:"Instruments",canActivate:[pe]},{path:"alarms",loadComponent:()=>import("./chunk-PMNZ64AV.js").then(r=>r.AlarmsPage),title:"Alarms",canActivate:[pe]},{path:"resources",loadComponent:()=>import("./chunk-TY3Z7VN7.js").then(r=>r.ResourcesPage),title:"Resources",canActivate:[pe]},{path:"autopilot",loadComponent:()=>import("./chunk-Y6HMWGD7.js").then(r=>r.AutopilotPage),title:"Autopilot",canActivate:[pe]},{path:"performance",loadComponent:()=>import("./chunk-D7R3XLTY.js").then(r=>r.PerformancePage),title:"Performance",canActivate:[pe]},{path:"diagnostics",loadComponent:()=>import("./chunk-G3XQQWW7.js").then(r=>r.DiagnosticsPage),title:"Diagnostics",canActivate:[pe]},{path:"settings",loadComponent:()=>import("./chunk-DIB5ZIRE.js").then(r=>r.SettingsPage),title:"Settings",canActivate:[pe]},{path:"widgets",loadComponent:()=>import("./chunk-UF5JRFSN.js").then(r=>r.WidgetsPage),title:"Widgets",canActivate:[pe]},{path:"styleguide",loadComponent:()=>import("./chunk-CQSNF5Q6.js").then(r=>r.StyleguidePage),title:"Styleguide"}];var wr={providers:[Zn({eventCoalescing:!0}),pi(Er),si(),vr(),{provide:yi,useValue:_i},Cr("ngsw-worker.js",{enabled:!ei(),registrationStrategy:"registerWhenStable:30000"})]};var Kt=class r{transform(e){if(e==null||!Number.isFinite(e))return"---";let t=e*(180/Math.PI);return t=(t%360+360)%360,t.toFixed(0).padStart(3,"0")+"\xB0"}static \u0275fac=function(t){return new(t||r)};static \u0275pipe=ht({name:"heading",type:r,pure:!0})};var jt=class r{transform(e,t="lat"){if(!e)return"---";let n=t==="lat"?e.lat:e.lon;if(n==null||!Number.isFinite(n))return"---";let i=t==="lat",a=i?n>=0?"N":"S":n>=0?"E":"W",s=Math.abs(n),o=Math.floor(s),l=(s-o)*60;return`${i?o.toString().padStart(2,"0"):o.toString().padStart(3,"0")}\xB0${l.toFixed(3)}'${a}`}static \u0275fac=function(t){return new(t||r)};static \u0275pipe=ht({name:"latLon",type:r,pure:!0})};function Ra(r,e){if(r&1){let t=U();p(0,"button",26),L("click",function(){D(t);let i=A(2);return I(i.toggleNav.emit())}),R(),p(1,"svg",27),E(2,"line",28)(3,"line",29)(4,"line",30),u()()}}function La(r,e){r&1&&(p(0,"span",9),w(1,"OMI"),u())}function Fa(r,e){if(r&1&&(p(0,"button",20),R(),p(1,"svg",24),E(2,"path",31)(3,"path",32),u(),Q(),p(4,"span",33),w(5),u()()),r&2){let t=A();ye("aria-label",t.alarmCount+" active alarms"),b(5),ee(t.alarmCount)}}function Ba(r,e){r&1&&(R(),E(0,"circle",34)(1,"path",35))}function za(r,e){r&1&&(R(),E(0,"path",25))}function Va(r,e){if(r&1){let t=U();p(0,"header",0)(1,"div",1),re(2,Ra,5,0,"button",2),p(3,"a",3),R(),p(4,"svg",4),E(5,"circle",5)(6,"line",6)(7,"path",7)(8,"line",8),u(),re(9,La,2,0,"span",9),u()(),Q(),p(10,"nav",10)(11,"div",11)(12,"span",12),w(13,"SOG"),u(),p(14,"span",13),w(15),k(16,"number"),u(),p(17,"span",14),w(18,"KTS"),u()(),E(19,"div",15),p(20,"div",11)(21,"span",12),w(22,"COG"),u(),p(23,"span",13),w(24),k(25,"heading"),u()(),E(26,"div",15),p(27,"div",11)(28,"span",12),w(29,"HDG"),u(),p(30,"span",13),w(31),k(32,"heading"),u(),p(33,"span",14),w(34,"T"),u()(),E(35,"div",15),p(36,"div",16)(37,"span",12),w(38,"POS"),u(),p(39,"div",17)(40,"span"),w(41),k(42,"latLon"),u(),p(43,"span"),w(44),k(45,"latLon"),u()()()(),p(46,"div",18)(47,"time",19),w(48),u(),re(49,Fa,6,2,"button",20),p(50,"div",21),E(51,"span",22),p(52,"span",12),w(53,"SK"),u()(),p(54,"button",23),L("click",function(){D(t);let i=A();return I(i.toggleTheme.emit())}),R(),p(55,"svg",24),re(56,Ba,2,0)(57,za,1,0,":svg:path",25),u()()()()}if(r&2){let t=e;ye("data-chart-mode",t.isChartMode),b(2),ae(t.isChartMode?2:-1),b(7),ae(t.isChartMode?-1:9),b(2),se("top-bar__datum--stale",t.sog.stale),b(4),ee(t.sog.stale?"---":ft(16,26,t.sog.value,"1.1-1")),b(5),se("top-bar__datum--stale",t.cog.stale),b(4),ee(t.cog.stale?"---":$(25,29,t.cog.value)),b(3),se("top-bar__datum--stale",t.hdg.stale),b(4),ee(t.hdg.stale?"---":$(32,31,t.hdg.value)),b(5),se("top-bar__datum--stale",t.position.stale),b(5),ee(t.position.stale||!t.position.value?"---":ft(42,33,t.position.value,"lat")),b(3),ee(t.position.stale||!t.position.value?"---":ft(45,36,t.position.value,"lon")),b(3),ye("datetime",t.utcISO),b(),ee(t.utcTime),b(),ae(t.alarmCount>0?49:-1),b(),se("top-bar__connection--online",t.connected)("top-bar__connection--offline",!t.connected),ye("aria-label",t.connected?"Signal K connected":"Signal K offline"),b(4),ye("aria-label",t.isDayMode?"Switch to Night mode":"Switch to Day mode"),b(2),ae(t.isDayMode?56:57)}}var $a=1e4,Ut=class r{store=x(vt);connected$=new Me(!1);isNight$=new Me(!1);alarmCount$=new Me(0);criticalCount$=new Me(0);hasUnacknowledged$=new Me(!1);chartMode$=new Me(!1);set connected(e){this.connected$.next(!!e)}set isNight(e){this.isNight$.next(!!e)}set alarmCount(e){this.alarmCount$.next(this.sanitizeCount(e))}set criticalCount(e){this.criticalCount$.next(this.sanitizeCount(e))}set hasUnacknowledged(e){this.hasUnacknowledged$.next(!!e)}set chartMode(e){this.chartMode$.next(!!e)}toggleTheme=new ze;openAlarms=new ze;toggleNav=new ze;sog$=this.store.observe(Oe.navigation.speedOverGround);cog$=this.store.observe(Oe.navigation.courseOverGroundTrue);hdg$=this.store.observe(Oe.navigation.headingTrue);pos$=this.store.observe(Oe.navigation.position);clock$=Fe(1e3).pipe(ue(0),N(()=>{let e=new Date().toISOString();return{time:e.substring(11,19),iso:e}}));vm$=dt([this.connected$,this.isNight$,this.alarmCount$,this.criticalCount$,this.hasUnacknowledged$,this.chartMode$,this.clock$,this.sog$.pipe(ue(void 0)),this.cog$.pipe(ue(void 0)),this.hdg$.pipe(ue(void 0)),this.pos$.pipe(ue(void 0))]).pipe(N(([e,t,n,i,a,s,o,l,c,d,m])=>{let S=Date.now(),y=P=>!P||S-P.timestamp>$a,f=l?.value!=null?l.value*1.94384:0,v=m?.value?{lat:m.value.latitude??m.value.lat,lon:m.value.longitude??m.value.lon}:null;return{sog:{value:f,stale:y(l)},cog:{value:c?.value??0,stale:y(c)},hdg:{value:d?.value??0,stale:y(d)},position:{value:v,stale:y(m)},utcTime:o.time,utcISO:o.iso,connected:e,alarmCount:Math.max(0,n),criticalCount:Math.max(0,i),hasUnacknowledged:a,isDayMode:!t,isChartMode:s}}));sanitizeCount(e){return e==null||!Number.isFinite(e)?0:Math.max(0,Math.floor(e))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=H({type:r,selectors:[["app-top-bar"]],inputs:{connected:"connected",isNight:"isNight",alarmCount:"alarmCount",criticalCount:"criticalCount",hasUnacknowledged:"hasUnacknowledged",chartMode:"chartMode"},outputs:{toggleTheme:"toggleTheme",openAlarms:"openAlarms",toggleNav:"toggleNav"},decls:2,vars:3,consts:[["role","banner",1,"global-top-bar"],[1,"top-bar__left"],["type","button","aria-label","Toggle navigation",1,"top-bar__menu-btn"],["routerLink","/chart","aria-label","OMI Home",1,"top-bar__brand"],["width","24","height","24","viewBox","0 0 24 24",1,"top-bar__logo"],["cx","12","cy","5","r","2","fill","var(--gb-needle-primary)"],["x1","12","y1","7","x2","12","y2","19","stroke","var(--gb-needle-primary)","stroke-width","2"],["d","M6 10 Q12 8 18 10","stroke","var(--gb-needle-primary)","stroke-width","1.5","fill","none"],["x1","6","y1","19","x2","18","y2","19","stroke","var(--gb-needle-primary)","stroke-width","1.5"],[1,"top-bar__brand-text"],["aria-label","Vessel data",1,"top-bar__vessel-data"],[1,"top-bar__datum"],[1,"top-bar__datum-label"],[1,"top-bar__datum-value"],[1,"top-bar__datum-unit"],["aria-hidden","true",1,"top-bar__separator"],[1,"top-bar__position"],[1,"top-bar__coords"],[1,"top-bar__right"],[1,"top-bar__utc"],["routerLink","/alarms",1,"top-bar__alarm-btn","top-bar__alarm-btn--active"],[1,"top-bar__connection"],[1,"connection-dot"],[1,"top-bar__theme-btn",3,"click"],["width","16","height","16","viewBox","0 0 16 16"],["d","M13 8A5 5 0 116 1a6 6 0 107 7z","fill","currentColor"],["type","button","aria-label","Toggle navigation",1,"top-bar__menu-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","3","y1","6","x2","21","y2","6"],["x1","3","y1","12","x2","21","y2","12"],["x1","3","y1","18","x2","21","y2","18"],["d","M8 1a5.5 5.5 0 00-5.5 5.5v2L1 10h14l-1.5-1.5v-2A5.5 5.5 0 008 1z","fill","currentColor"],["d","M6 13a2 2 0 004 0H6z","fill","currentColor"],[1,"top-bar__alarm-badge"],["cx","8","cy","8","r","3.5","fill","currentColor"],["d","M8 1v1.5M8 13.5V15M1 8h1.5M13.5 8H15M3.05 3.05l1.06 1.06M11.89 11.89l1.06 1.06M11.89 3.05l-1.06 1.06M3.05 11.89l1.06-1.06","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"]],template:function(t,n){if(t&1&&(re(0,Va,58,39,"header",0),k(1,"async")),t&2){let i;ae((i=$(1,1,n.vm$))?0:-1,i)}},dependencies:[te,yt,je,Ke,ni,Kt,jt],styles:["[_nghost-%COMP%]{display:block;position:relative;z-index:var(--z-20)}.global-top-bar[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;align-items:center;height:48px;padding:0 var(--space-3);background:var(--gb-bg-bezel);border-bottom:1px solid var(--gb-border-panel);position:relative;z-index:var(--z-20);-webkit-user-select:none;user-select:none;gap:var(--space-4)}[data-theme=night][_ngcontent-%COMP%]   .global-top-bar[_ngcontent-%COMP%]{box-shadow:0 1px #52667a4d,0 2px 12px #0006}.global-top-bar[data-chart-mode=true][_ngcontent-%COMP%]{grid-template-columns:48px 1fr auto}.top-bar__left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-2)}.top-bar__brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;text-decoration:none}.top-bar__menu-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:var(--gb-bg-glass);border:1px solid var(--gb-border-panel);border-radius:8px;cursor:pointer;color:var(--gb-text-muted);padding:0;transition:all .15s ease}.top-bar__menu-btn[_ngcontent-%COMP%]:hover{background:var(--gb-bg-glass-active);color:var(--gb-text-value);border-color:var(--gb-border-active)}.top-bar__brand[_ngcontent-%COMP%]:hover   .top-bar__brand-text[_ngcontent-%COMP%]{color:var(--gb-text-value)}.top-bar__brand-text[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:.875rem;font-weight:800;letter-spacing:.2em;text-transform:uppercase;color:var(--gb-text-muted);transition:color .2s ease}.top-bar__vessel-data[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-2);overflow:hidden}@media(max-width:900px){.top-bar__vessel-data[_ngcontent-%COMP%]   .top-bar__position[_ngcontent-%COMP%]{display:none}}@media(max-width:640px){.top-bar__vessel-data[_ngcontent-%COMP%]   .top-bar__datum[_ngcontent-%COMP%]:nth-child(n+5){display:none}}.top-bar__datum[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:3px;flex-shrink:0;transition:opacity .3s ease}.top-bar__datum--stale[_ngcontent-%COMP%]{opacity:.45}.top-bar__datum-label[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:.55rem;font-weight:700;text-transform:uppercase;letter-spacing:.14em;color:var(--gb-text-muted);line-height:1}.top-bar__datum-value[_ngcontent-%COMP%]{font-family:JetBrains Mono,monospace;font-variant-numeric:tabular-nums;font-size:.9rem;font-weight:500;color:var(--gb-text-value);line-height:1}.top-bar__datum-unit[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:.5rem;font-weight:700;text-transform:uppercase;letter-spacing:.14em;color:var(--gb-text-muted);line-height:1}.top-bar__separator[_ngcontent-%COMP%]{width:1px;height:20px;background:var(--gb-border-panel);flex-shrink:0;margin:0 var(--space-1)}.top-bar__position[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.top-bar__coords[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1px}.top-bar__coords[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:JetBrains Mono,monospace;font-variant-numeric:tabular-nums;font-size:.7rem;font-weight:500;color:var(--gb-text-value);line-height:1}.top-bar__right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3)}.top-bar__utc[_ngcontent-%COMP%]{font-family:JetBrains Mono,monospace;font-variant-numeric:tabular-nums;font-size:.75rem;font-weight:500;color:var(--gb-text-muted);letter-spacing:.04em}.top-bar__alarm-btn[_ngcontent-%COMP%]{position:relative;width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;border-radius:var(--radius-sm, 4px);cursor:pointer;color:var(--gb-text-muted);transition:all .15s ease}.top-bar__alarm-btn--active[_ngcontent-%COMP%]{color:var(--gb-data-stale);animation:_ngcontent-%COMP%_gb-alarm-beat 1.2s ease-in-out infinite}.top-bar__alarm-btn[_ngcontent-%COMP%]:hover{background:var(--gb-bg-glass-active);color:var(--gb-text-value)}.top-bar__alarm-badge[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;min-width:14px;height:14px;background:var(--gb-data-stale);color:#fff;font-size:.55rem;font-weight:700;border-radius:7px;display:flex;align-items:center;justify-content:center;padding:0 3px}.top-bar__connection[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.connection-dot[_ngcontent-%COMP%]{width:7px;height:7px;border-radius:50%;flex-shrink:0;transition:background-color .4s ease,box-shadow .4s ease}.top-bar__connection--online[_ngcontent-%COMP%]   .connection-dot[_ngcontent-%COMP%]{background:var(--gb-data-good);box-shadow:0 0 5px #00e676b3}.top-bar__connection--offline[_ngcontent-%COMP%]   .connection-dot[_ngcontent-%COMP%]{background:var(--gb-data-stale);animation:_ngcontent-%COMP%_gb-pulse-stale 1.5s ease-in-out infinite}.top-bar__theme-btn[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:transparent;border:1px solid transparent;border-radius:var(--radius-sm, 4px);cursor:pointer;color:var(--gb-text-muted);transition:all .15s ease}.top-bar__theme-btn[_ngcontent-%COMP%]:hover{background:var(--gb-bg-glass-active);border-color:var(--gb-border-panel);color:var(--gb-text-value)}@keyframes _ngcontent-%COMP%_gb-alarm-beat{0%,to{transform:scale(1)}50%{transform:scale(1.08)}}@keyframes _ngcontent-%COMP%_gb-pulse-stale{0%,to{opacity:1}50%{opacity:.4}}@media(max-width:768px){.top-bar__utc[_ngcontent-%COMP%]{display:none}}"],changeDetection:0})};function ja(r,e){if(r&1&&(p(0,"span",6),w(1),u()),r&2){let t=A(2);b(),Je(" +",t.count-1," more ")}}function Ua(r,e){if(r&1){let t=U();p(0,"button",10),L("click",function(){D(t);let i=A(2),a=A();return I(a.acknowledge(i.topAlarm.id))}),w(1," ACK "),u()}}function qa(r,e){if(r&1&&(p(0,"div",2)(1,"span",3),E(2,"app-icon",4),u(),p(3,"span",5),w(4),u(),re(5,ja,2,1,"span",6),p(6,"span",7),re(7,Ua,2,0,"button",8),p(8,"a",9),w(9," VIEW "),u()()()),r&2){let t=A();ye("data-severity",t.severity),b(2),B("name",t.topAlarm.icon),b(2),Je(" ",t.topAlarm.message," "),b(),ae(t.count>1?5:-1),b(2),ae(t.topAlarm.canAcknowledge?7:-1)}}function Ga(r,e){if(r&1&&(p(0,"div",1),re(1,qa,10,5,"div",2),u()),r&2){let t=e;se("alarm-banner--empty",t.empty)("alarm-banner--has-alarms",!t.empty),ye("aria-live",t.ariaLive),b(),ae(!t.empty&&t.topAlarm?1:-1)}}var qt=class r{facade=x(St);now$=Fe(1e3).pipe(ue(0),N(()=>Date.now()));vm$=dt([this.facade.activeAlarms$,this.now$]).pipe(N(([e,t])=>{let n=e.map(m=>this.toBannerAlarm(m)),i={warning:1,critical:2,emergency:3},a=[...n].sort((m,S)=>{let y=i[S.severity]-i[m.severity];return y!==0?y:S.timestamp-m.timestamp}),s=a.length,o=a[0]??null,l=o?o.severity:null,c=l==="critical"||l==="emergency"?"assertive":"polite",d=o?{id:o.id,icon:this.iconFor(o),message:o.message,canAcknowledge:o.state==="active"}:null;return{empty:s===0,severity:l,topAlarm:d,count:s,ariaLive:c}}));acknowledge(e){this.facade.acknowledgeAlarm(e)}toBannerAlarm(e){let t=e.severity==="emergency"?"emergency":e.severity==="critical"?"critical":"warning";return{id:e.id,type:e.type,message:e.message,severity:t,state:e.state,timestamp:e.timestamp}}iconFor(e){return e.type==="mob"?"mob":e.severity==="emergency"?"alarm":e.severity==="critical"?"error":"alert-triangle"}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=H({type:r,selectors:[["app-alarm-banner"]],decls:2,vars:3,consts:[["role","alert",1,"alarm-banner",3,"alarm-banner--empty","alarm-banner--has-alarms"],["role","alert",1,"alarm-banner"],[1,"alarm-banner__inner"],[1,"alarm-banner__icon"],["size","16",3,"name"],[1,"alarm-banner__message"],[1,"alarm-banner__count"],[1,"alarm-banner__actions"],["type","button","aria-label","Acknowledge alarm",1,"alarm-banner__btn","alarm-banner__btn--ack"],["routerLink","/alarms","aria-label","View all alarms",1,"alarm-banner__btn","alarm-banner__btn--view"],["type","button","aria-label","Acknowledge alarm",1,"alarm-banner__btn","alarm-banner__btn--ack",3,"click"]],template:function(t,n){if(t&1&&(re(0,Ga,2,6,"div",0),k(1,"async")),t&2){let i;ae((i=$(1,1,n.vm$))?0:-1,i)}},dependencies:[te,bt,je,Ke],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block}.alarm-banner[_ngcontent-%COMP%]{position:relative;z-index:var(--z-20, 20);overflow:hidden;transition:max-height .3s cubic-bezier(.4,0,.2,1),opacity .3s ease}.alarm-banner--empty[_ngcontent-%COMP%]{max-height:0;opacity:0;pointer-events:none}.alarm-banner--has-alarms[_ngcontent-%COMP%]{max-height:52px;opacity:1}.alarm-banner__inner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3);padding:0 var(--space-4);height:44px}.alarm-banner__inner[data-severity=emergency][_ngcontent-%COMP%]{background:var(--gb-alarm-emergency-bg);border-bottom:2px solid var(--gb-alarm-emergency-border);animation:_ngcontent-%COMP%_gb-alarm-beat .8s ease-in-out infinite}.alarm-banner__inner[data-severity=critical][_ngcontent-%COMP%]{background:var(--gb-alarm-critical-bg);border-bottom:2px solid var(--gb-alarm-critical-border);animation:_ngcontent-%COMP%_gb-alarm-beat 1.2s ease-in-out infinite}.alarm-banner__inner[data-severity=warning][_ngcontent-%COMP%]{background:var(--gb-alarm-warning-bg);border-bottom:1px solid var(--gb-alarm-warning-border)}.alarm-banner__icon[_ngcontent-%COMP%]{font-size:1rem;flex-shrink:0;display:inline-flex;align-items:center;color:var(--gb-text-value)}.alarm-banner__message[_ngcontent-%COMP%]{font-family:Space Grotesk,sans-serif;font-size:.8125rem;font-weight:600;color:var(--gb-text-value);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.alarm-banner__count[_ngcontent-%COMP%]{font-family:JetBrains Mono,monospace;font-size:.7rem;color:var(--gb-text-muted);flex-shrink:0}.alarm-banner__actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-2);flex-shrink:0}.alarm-banner__btn[_ngcontent-%COMP%]{height:28px;padding:0 var(--space-2);border-radius:var(--radius-sm, 4px);font-family:Space Grotesk,sans-serif;font-size:.65rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;cursor:pointer;border:1px solid;transition:all .15s ease;display:inline-flex;align-items:center;justify-content:center}.alarm-banner__btn--ack[_ngcontent-%COMP%]{background:transparent;border-color:var(--gb-text-muted);color:var(--gb-text-muted)}.alarm-banner__btn--ack[_ngcontent-%COMP%]:hover{border-color:var(--gb-text-value);color:var(--gb-text-value)}.alarm-banner__btn--view[_ngcontent-%COMP%]{background:transparent;border-color:#4a90d9;color:#4a90d9;text-decoration:none}.alarm-banner__btn--view[_ngcontent-%COMP%]:hover{background:#4a90d91f}@keyframes _ngcontent-%COMP%_gb-alarm-beat{0%,to{opacity:1}50%{opacity:.72}}@media(max-width:600px){.alarm-banner__inner[_ngcontent-%COMP%]{padding:0 var(--space-3);gap:var(--space-2)}.alarm-banner__count[_ngcontent-%COMP%]{display:none}}'],changeDetection:0})};function Qa(r,e){r&1&&E(0,"span",50)}function Wa(r,e){if(r&1){let t=U();p(0,"app-top-bar",51),k(1,"async"),k(2,"async"),k(3,"async"),k(4,"async"),k(5,"async"),L("toggleTheme",function(){D(t);let i=A();return I(i.toggleTheme())})("openAlarms",function(){D(t);let i=A();return I(i.navigateToAlarms())})("toggleNav",function(){D(t);let i=A();return I(i.toggleNav())}),u()}if(r&2){let t=A();B("connected",$(1,6,t.connected$)??!1)("isNight",$(2,8,t.theme$)==="night")("alarmCount",$(3,10,t.alarmCount$)??0)("criticalCount",$(4,12,t.criticalCount$)??0)("hasUnacknowledged",$(5,14,t.hasUnacknowledged$)??!1)("chartMode",!1)}}function Ha(r,e){if(r&1){let t=U();p(0,"button",52),L("click",function(){D(t);let i=A();return I(i.toggleNav())}),R(),p(1,"svg",53),E(2,"line",54)(3,"line",55)(4,"line",56),u()()}}var Gt=class r{themeService=x(Ci);signalK=x(vi);alarmsFacade=x(St);router=x(gt);theme$=this.themeService.theme$;connected$=this.signalK.connected$;alarmCount$=this.alarmsFacade.activeAlarms$.pipe(N(e=>e.length));criticalCount$=this.alarmsFacade.activeAlarms$.pipe(N(e=>e.filter(t=>t.severity==="critical"||t.severity==="emergency").length));hasUnacknowledged$=this.alarmsFacade.activeAlarms$.pipe(N(e=>e.some(t=>t.state==="active")));isChartRoute$=this.router.events.pipe(Ye(e=>e instanceof oi),N(e=>e.urlAfterRedirects.startsWith("/chart")),ue(this.router.url.startsWith("/chart")));navCollapsed=!0;constructor(){this.signalK.connect()}toggleTheme(){this.themeService.toggle()}toggleNav(){this.navCollapsed=!this.navCollapsed,this.requestChartReflow()}handleMainAreaClick(e){this.navCollapsed||!this.router.url.startsWith("/chart")||e.target?.closest(".chart-nav-hamburger")||(this.navCollapsed=!0,this.requestChartReflow())}navigateToAlarms(){this.router.navigate(["/alarms"])}requestChartReflow(){requestAnimationFrame(()=>window.dispatchEvent(new Event("resize"))),setTimeout(()=>window.dispatchEvent(new Event("resize")),120),setTimeout(()=>window.dispatchEvent(new Event("resize")),320)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=H({type:r,selectors:[["app-app-shell"]],decls:69,vars:21,consts:[[1,"app-layout"],["role","navigation","aria-label","Main navigation",1,"sidenav",3,"click"],[1,"nav-main"],["routerLink","/chart","routerLinkActive","active","title","Chart",1,"nav-item"],["xmlns","http://www.w3.org/2000/svg","width","22","height","22","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.75","stroke-linecap","round","stroke-linejoin","round"],["points","1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"],["x1","8","y1","2","x2","8","y2","18"],["x1","16","y1","6","x2","16","y2","22"],["routerLink","/dashboard","routerLinkActive","active","title","Dashboard",1,"nav-item"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["x1","3","y1","9","x2","21","y2","9"],["x1","9","y1","21","x2","9","y2","9"],["routerLink","/instruments","routerLinkActive","active","title","Instruments",1,"nav-item"],["cx","12","cy","12","r","10"],["points","16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"],["routerLink","/autopilot","routerLinkActive","active","title","Autopilot",1,"nav-item"],["d","M3 11l19-9-9 19-2-8-8-2z"],["routerLink","/resources","routerLinkActive","active","title","Resources",1,"nav-item"],["d","M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"],["cx","12","cy","10","r","3"],[1,"nav-separator"],["routerLink","/alarms","routerLinkActive","active","title","Alarms",1,"nav-item"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],["class","nav-item__badge",4,"ngIf"],["routerLink","/performance","routerLinkActive","active","title","Performance",1,"nav-item"],["points","22 12 18 12 15 21 9 3 6 12 2 12"],["routerLink","/diagnostics","routerLinkActive","active","title","Diagnostics",1,"nav-item"],["x","2","y","3","width","20","height","14","rx","2","ry","2"],["x1","8","y1","21","x2","16","y2","21"],["x1","12","y1","17","x2","12","y2","21"],[1,"nav-footer"],["routerLink","/widgets","routerLinkActive","active","title","Widgets",1,"nav-item"],["x","3","y","3","width","7","height","7"],["x","14","y","3","width","7","height","7"],["x","3","y","14","width","7","height","7"],["x","14","y","14","width","7","height","7"],["routerLink","/settings","routerLinkActive","active","title","Settings",1,"nav-item"],["cx","12","cy","12","r","3"],["d","M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"],["routerLink","/styleguide","routerLinkActive","active","title","Styleguide",1,"nav-item"],["d","M12 2L2 7l10 5 10-5-10-5z"],["d","M2 17l10 5 10-5"],["d","M2 12l10 5 10-5"],[1,"main-container",3,"click"],[3,"connected","isNight","alarmCount","criticalCount","hasUnacknowledged","chartMode","toggleTheme","openAlarms","toggleNav",4,"ngIf"],["class","chart-nav-hamburger","aria-label","Toggle navigation",3,"click",4,"ngIf"],[1,"content-area"],[1,"page-container"],[1,"nav-item__badge"],[3,"toggleTheme","openAlarms","toggleNav","connected","isNight","alarmCount","criticalCount","hasUnacknowledged","chartMode"],["aria-label","Toggle navigation",1,"chart-nav-hamburger",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","3","y1","6","x2","21","y2","6"],["x1","3","y1","12","x2","21","y2","12"],["x1","3","y1","18","x2","21","y2","18"]],template:function(t,n){t&1&&(p(0,"div",0),k(1,"async"),p(2,"nav",1),k(3,"async"),L("click",function(){return n.navCollapsed=!0}),p(4,"div",2)(5,"a",3),R(),p(6,"svg",4),E(7,"polygon",5)(8,"line",6)(9,"line",7),u()(),Q(),p(10,"a",8),R(),p(11,"svg",4),E(12,"rect",9)(13,"line",10)(14,"line",11),u()(),Q(),p(15,"a",12),R(),p(16,"svg",4),E(17,"circle",13)(18,"polygon",14),u()(),Q(),p(19,"a",15),R(),p(20,"svg",4),E(21,"path",16),u()(),Q(),p(22,"a",17),R(),p(23,"svg",4),E(24,"path",18)(25,"circle",19),u()(),Q(),E(26,"div",20),p(27,"a",21),R(),p(28,"svg",4),E(29,"path",22)(30,"line",23)(31,"line",24),u(),he(32,Qa,1,0,"span",25),k(33,"async"),u(),Q(),p(34,"a",26),R(),p(35,"svg",4),E(36,"polyline",27),u()(),Q(),p(37,"a",28),R(),p(38,"svg",4),E(39,"rect",29)(40,"line",30)(41,"line",31),u()()(),Q(),p(42,"div",32),E(43,"div",20),p(44,"a",33),R(),p(45,"svg",4),E(46,"rect",34)(47,"rect",35)(48,"rect",36)(49,"rect",37),u()(),Q(),p(50,"a",38),R(),p(51,"svg",4),E(52,"circle",39)(53,"path",40),u()(),Q(),p(54,"a",41),R(),p(55,"svg",4),E(56,"path",42)(57,"path",43)(58,"path",44),u()()()(),Q(),p(59,"div",45),k(60,"async"),L("click",function(a){return n.handleMainAreaClick(a)}),he(61,Wa,6,16,"app-top-bar",46),k(62,"async"),he(63,Ha,5,0,"button",47),k(64,"async"),E(65,"app-alarm-banner"),p(66,"main",48)(67,"div",49),E(68,"router-outlet"),u()()()()),t&2&&(se("app-layout--chart",$(1,9,n.isChartRoute$)&&n.navCollapsed),b(2),se("sidenav--chart-hidden",$(3,11,n.isChartRoute$)&&n.navCollapsed),b(30),B("ngIf",$(33,13,n.alarmCount$)??!1),b(27),Xn("--chart-topbar-left-offset",$(60,15,n.isChartRoute$)&&n.navCollapsed?"44px":"0px"),b(2),B("ngIf",!$(62,17,n.isChartRoute$)),b(2),B("ngIf",$(64,19,n.isChartRoute$)&&n.navCollapsed))},dependencies:[te,$e,yt,li,je,ci,Ut,qt,Ke],styles:['[_nghost-%COMP%]{display:block;height:100vh;--nav-width: 64px}.app-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:var(--nav-width) 1fr;height:100vh;background-color:var(--gb-bg-canvas);transition:grid-template-columns .3s cubic-bezier(.2,0,0,1)}.app-layout--chart[_ngcontent-%COMP%]{grid-template-columns:0px 1fr}.sidenav[_ngcontent-%COMP%]{width:64px;background:var(--gb-bg-bezel);border-right:1px solid var(--gb-border-panel);display:flex;flex-direction:column;align-items:center;padding:var(--space-2) 0;gap:var(--space-1);z-index:var(--z-10);overflow:hidden;transition:width .3s cubic-bezier(.2,0,0,1),opacity .3s ease}.sidenav--chart-hidden[_ngcontent-%COMP%]{width:0;padding:0;border-right:none;opacity:0;pointer-events:none}.nav-item[_ngcontent-%COMP%]{position:relative;width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:12px;color:var(--gb-text-muted);text-decoration:none;transition:all .2s cubic-bezier(.4,0,.2,1)}.nav-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px;stroke-width:1.75px;flex-shrink:0}.nav-item[_ngcontent-%COMP%]:hover{background:var(--gb-bg-glass-active);color:var(--gb-text-value)}.nav-item.active[_ngcontent-%COMP%]{background:#4a90d926;color:#4a90d9}.nav-item.active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-8px;top:50%;transform:translateY(-50%);width:3px;height:24px;background:#4a90d9;border-radius:0 2px 2px 0}[data-theme=night][_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{box-shadow:0 0 12px #4a90d933}.nav-item__badge[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:8px;height:8px;background:var(--gb-data-stale);border-radius:50%;border:2px solid var(--gb-bg-bezel)}.nav-separator[_ngcontent-%COMP%]{width:32px;height:1px;background:var(--gb-border-panel);margin:var(--space-1) 0}.nav-main[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:var(--space-1)}.nav-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--space-1);padding-bottom:var(--space-2)}.main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden;position:relative}.content-area[_ngcontent-%COMP%]{flex:1;overflow:hidden;position:relative;display:flex;flex-direction:column}.page-container[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column}.page-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(router-outlet){flex:1;min-height:0}.chart-nav-hamburger[_ngcontent-%COMP%]{position:absolute;top:0;left:var(--space-2, 8px);z-index:15;width:36px;height:48px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;border-radius:0;color:var(--gb-text-muted);cursor:pointer;padding:0;transition:color .15s ease,background-color .15s ease}.chart-nav-hamburger[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--gb-bg-glass-active) 85%,transparent);border-radius:8px;color:var(--gb-text-value)}@media(max-width:1023px)and (min-width:641px){[_nghost-%COMP%]{--nav-width: 0px}.sidenav[_ngcontent-%COMP%]{position:fixed;left:0;top:0;bottom:0;width:64px;z-index:var(--z-30);transform:translate(-100%);transition:transform .3s cubic-bezier(.2,0,0,1)}.sidenav[_ngcontent-%COMP%]:not(.sidenav--chart-hidden){transform:translate(0)}.app-layout[_ngcontent-%COMP%], .app-layout--chart[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media(max-width:640px){[_nghost-%COMP%]{--nav-width: 0px}.app-layout[_ngcontent-%COMP%], .app-layout--chart[_ngcontent-%COMP%]{grid-template-columns:1fr}.sidenav[_ngcontent-%COMP%]{position:fixed;inset:auto 0 0;width:100%;height:56px;flex-direction:row;justify-content:space-around;border-right:none;border-top:1px solid var(--gb-border-panel);padding:0;z-index:var(--z-30);gap:0}.sidenav--chart-hidden[_ngcontent-%COMP%]{height:0;border-top:none}.nav-main[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-around;flex:1;overflow:hidden}.nav-footer[_ngcontent-%COMP%], .nav-separator[_ngcontent-%COMP%]{display:none}.nav-item[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:8px}.nav-item.active[_ngcontent-%COMP%]:before{display:none}.nav-main[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:nth-child(n+6){display:none}.main-container[_ngcontent-%COMP%]{padding-bottom:56px}}'],changeDetection:0})};function Ya(r,e){if(r&1){let t=U();p(0,"button",8),L("click",function(){D(t);let i=A();return I(i.onAction())}),w(1),u()}if(r&2){let t=A();b(),Je(" ",t.config.action.label," ")}}var Qt=class r{config;dismiss=new ze;get iconName(){switch(this.config.type){case"success":return"check";case"warning":return"alert-triangle";case"error":return"alert-triangle";default:return"info"}}onAction(){this.config.action?.callback&&this.config.action.callback(),this.dismiss.emit()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=H({type:r,selectors:[["app-toast"]],inputs:{config:"config"},outputs:{dismiss:"dismiss"},decls:9,vars:7,consts:[["role","alert",1,"toast"],[1,"toast-icon"],[3,"name","size"],[1,"toast-content"],[1,"message"],["class","action-btn",3,"click",4,"ngIf"],["aria-label","Dismiss",1,"close-btn",3,"click"],["name","x",3,"size"],[1,"action-btn",3,"click"]],template:function(t,n){t&1&&(p(0,"div",0)(1,"div",1),E(2,"app-icon",2),u(),p(3,"div",3)(4,"span",4),w(5),u()(),he(6,Ya,2,1,"button",5),p(7,"button",6),L("click",function(){return n.dismiss.emit()}),E(8,"app-icon",7),u()()),t&2&&(Jn("toast-"+n.config.type),b(2),B("name",n.iconName)("size",20),b(3),ee(n.config.message),b(),B("ngIf",n.config.action),b(2),B("size",16))},dependencies:[te,$e,bt],styles:[".toast[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:1rem;background-color:var(--gb-bg-panel);border:1px solid var(--border-default);border-radius:var(--radius-md);box-shadow:var(--shadow-lg);color:var(--gb-text-value);min-width:300px;max-width:400px;gap:.75rem;pointer-events:auto}.toast-icon[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center;padding-top:2px}.toast-content[_ngcontent-%COMP%]{flex-grow:1;font-size:var(--text-sm);line-height:1.4;font-family:var(--font-body)}.toast-info[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:var(--info-500)}.toast-success[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:var(--success-500)}.toast-warning[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:var(--warn-500)}.toast-error[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:var(--danger-500)}.toast-info[_ngcontent-%COMP%]{border-left:4px solid var(--info-500)}.toast-success[_ngcontent-%COMP%]{border-left:4px solid var(--success-500)}.toast-warning[_ngcontent-%COMP%]{border-left:4px solid var(--warn-500)}.toast-error[_ngcontent-%COMP%]{border-left:4px solid var(--danger-500)}.action-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-subtle);color:var(--gb-text-value);padding:2px 8px;border-radius:var(--radius-sm);font-size:var(--text-xs);cursor:pointer;white-space:nowrap}.action-btn[_ngcontent-%COMP%]:hover{background-color:var(--bg-surface-secondary)}.close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--gb-text-muted);cursor:pointer;padding:0;display:flex}.close-btn[_ngcontent-%COMP%]:hover{color:var(--gb-text-value)}"],changeDetection:0})};var Wt=class r{_toasts=Gn([]);toasts=this._toasts.asReadonly();counter=0;show(e){let t=this.counter++,n=zn(be({},e),{id:t,duration:e.duration??5e3});this._toasts.update(i=>[...i,n]),n.duration&&n.duration>0&&setTimeout(()=>{this.dismiss(t)},n.duration)}dismiss(e){this._toasts.update(t=>t.filter(n=>n.id!==e))}dismissAll(){this._toasts.set([])}static \u0275fac=function(t){return new(t||r)};static \u0275prov=ge({token:r,factory:r.\u0275fac,providedIn:"root"})};function Xa(r,e){if(r&1){let t=U();p(0,"app-toast",2),L("dismiss",function(){let i=D(t).$implicit,a=A();return I(a.dismiss(i.id))}),u()}if(r&2){let t=e.$implicit;B("config",t)}}var Ht=class r{service=x(Wt);toasts=this.service.toasts;dismiss(e){this.service.dismiss(e)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=H({type:r,selectors:[["app-toast-container"]],decls:2,vars:2,consts:[[1,"toast-stack"],[3,"config","dismiss",4,"ngFor","ngForOf"],[3,"dismiss","config"]],template:function(t,n){t&1&&(p(0,"div",0),he(1,Xa,1,1,"app-toast",1),u()),t&2&&(B("@listAnimation",n.toasts().length),b(),B("ngForOf",n.toasts()))},dependencies:[te,ti,Qt],styles:["[_nghost-%COMP%]{display:block;position:fixed;z-index:6000;pointer-events:none;bottom:20px;right:20px}.toast-stack[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:flex-end}"],data:{animation:[mi("listAnimation",[ui("* => *",[rn(":enter",[Ae({opacity:0,transform:"translateX(20px)"}),hi("50ms",[nn("300ms ease-out",Ae({opacity:1,transform:"translateX(0)"}))])],{optional:!0}),rn(":leave",[nn("200ms ease-in",Ae({opacity:0,transform:"translateX(20px)"}))],{optional:!0})])])]},changeDetection:0})};function Ja(r,e){if(r&1){let t=U();p(0,"div",3)(1,"button",4),L("click",function(){D(t);let i=A();return I(i.startConfirmation())}),w(2," MOB "),u()()}}function Za(r,e){if(r&1){let t=U();p(0,"div",5)(1,"div",6)(2,"div",7)(3,"i",8),w(4,"\u26A0\uFE0F"),u(),p(5,"h2"),w(6,"CONFIRM MOB?"),u()(),p(7,"p"),w(8,"Prepare for emergency maneuver."),u(),p(9,"div",9)(10,"app-button",10),L("click",function(){D(t);let i=A();return I(i.cancelConfirmation())}),w(11," CANCEL "),u(),p(12,"app-button",11),L("click",function(){D(t);let i=A();return I(i.confirmMOB())}),w(13," CONFIRM OVERBOARD "),u()()()()}}function es(r,e){if(r&1){let t=U();p(0,"div",12)(1,"div",13)(2,"h1"),w(3,"MAN OVERBOARD"),u(),E(4,"span",14),u(),p(5,"div",15)(6,"div",16)(7,"span",17),w(8,"TIME ELAPSED"),u(),p(9,"span",18),w(10),u()(),p(11,"div",19),w(12," Position Marked. Check Navigation! "),u()(),p(13,"div",20)(14,"button",21),L("touchstart",function(){D(t);let i=A();return I(i.clearMOB())})("click",function(){D(t);let i=A();return I(i.clearMOB())}),p(15,"span",22),w(16,"\u2693"),u(),p(17,"span"),w(18,"RECOVERED / CANCEL"),u()()()()}if(r&2){let t=A();b(10),ee(t.elapsedTime)}}var Yt=class r{constructor(e,t,n){this.alarmStore=e;this.audioService=t;this.datapointStore=n}active=!1;confirming=!1;elapsedTime="00:00";timerSub=null;mobTimestamp=null;currentPosition=null;ngOnInit(){this.alarmStore.activeAlarms$.pipe(N(e=>e.find(t=>t.type==="mob"))).subscribe(e=>{e?(this.active=!0,this.confirming=!1,this.mobTimestamp=e.timestamp,this.startTimer()):this.active&&(this.active=!1,this.stopTimer())}),this.datapointStore.observe(Oe.navigation.position).subscribe(e=>{e?.value&&(this.currentPosition={lat:e.value.latitude,lon:e.value.longitude})})}ngOnDestroy(){this.stopTimer()}startConfirmation(){this.confirming=!0}cancelConfirmation(){this.confirming=!1}confirmMOB(){this.confirming=!1,this.active=!0,this.alarmStore.triggerAlarm("mob-manual","mob","emergency","MAN OVERBOARD",{position:this.currentPosition}),this.audioService.playAlarm("emergency")}clearMOB(){this.alarmStore.clearAlarm("mob-manual"),this.audioService.stop(),this.active=!1,this.stopTimer()}startTimer(){this.timerSub||(this.timerSub=Fe(1e3).subscribe(()=>{if(!this.mobTimestamp)return;let e=Date.now()-this.mobTimestamp,t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);this.elapsedTime=`${this.pad(t)}:${this.pad(n)}`}))}stopTimer(){this.timerSub&&(this.timerSub.unsubscribe(),this.timerSub=null)}pad(e){return e<10?"0"+e:""+e}static \u0275fac=function(t){return new(t||r)(Ve(fi),Ve(bi),Ve(vt))};static \u0275cmp=H({type:r,selectors:[["app-mob-alert"]],decls:3,vars:3,consts:[["class","mob-trigger-container",4,"ngIf"],["class","mob-overlay confirmation",4,"ngIf"],["class","mob-overlay emergency",4,"ngIf"],[1,"mob-trigger-container"],[1,"mob-fab",3,"click"],[1,"mob-overlay","confirmation"],[1,"mob-dialog"],[1,"dialog-header"],[1,"warning-icon"],[1,"dialog-actions"],["variant","outline",3,"click"],["variant","danger",3,"click"],[1,"mob-overlay","emergency"],[1,"emergency-header"],[1,"pulse-indicator"],[1,"emergency-data"],[1,"data-row"],[1,"label"],[1,"value"],[1,"info-row"],[1,"emergency-actions"],[1,"clear-btn",3,"touchstart","click"],[1,"icon"]],template:function(t,n){t&1&&he(0,Ja,3,0,"div",0)(1,Za,14,0,"div",1)(2,es,19,1,"div",2),t&2&&(B("ngIf",!n.active&&!n.confirming),b(),B("ngIf",n.confirming),b(),B("ngIf",n.active))},dependencies:[te,$e,Si],styles:["[_nghost-%COMP%]{display:block;z-index:9999;position:fixed;top:0;left:0;pointer-events:none;width:100%;height:100%}.mob-trigger-container[_ngcontent-%COMP%]{position:absolute;bottom:88px;right:24px;pointer-events:auto}.mob-fab[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;background-color:var(--color-danger, #ff4444);color:#fff;font-weight:900;font-size:1.2rem;border:4px solid rgba(255,255,255,.2);box-shadow:0 4px 12px #0006;cursor:pointer;transition:transform .2s,background-color .2s}.mob-fab[_ngcontent-%COMP%]:active{transform:scale(.95);background-color:#d32f2f}.mob-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:auto;display:flex;flex-direction:column;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.mob-overlay.confirmation[_ngcontent-%COMP%]{background-color:#000000d9}.mob-overlay.emergency[_ngcontent-%COMP%]{background-color:#c80000f2;animation:_ngcontent-%COMP%_pulse-bg 2s infinite}.mob-dialog[_ngcontent-%COMP%]{background:var(--panel-bg, #1e293b);border:2px solid var(--color-danger, #ff4444);padding:32px;border-radius:12px;text-align:center;color:#fff;max-width:90%;width:400px}.mob-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:16px}.mob-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:var(--color-danger, #ff4444)}.mob-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{font-size:2rem}.mob-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;margin-top:32px}.emergency-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:48px}.emergency-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;font-weight:900;color:#fff;text-shadow:0 4px 8px rgba(0,0,0,.5);margin:0;letter-spacing:2px}.emergency-header[_ngcontent-%COMP%]   .pulse-indicator[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:#fff;animation:_ngcontent-%COMP%_blink .5s infinite}.emergency-data[_ngcontent-%COMP%]{text-align:center;margin-bottom:64px}.emergency-data[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.emergency-data[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#fffc;font-size:1rem;letter-spacing:1px;text-transform:uppercase}.emergency-data[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:5rem;font-weight:700;font-family:monospace;color:#fff}.emergency-data[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{margin-top:16px;font-size:1.2rem;color:#ffffffe6}.emergency-actions[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{background:#fff;color:#c00;border:none;padding:24px 48px;border-radius:8px;font-size:1.5rem;font-weight:800;display:flex;align-items:center;gap:16px;box-shadow:0 8px 16px #0000004d}.emergency-actions[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:active{transform:scale(.98);background:#f0f0f0}@keyframes _ngcontent-%COMP%_pulse-bg{0%{background-color:#b40000e6}50%{background-color:#dc0000f2}to{background-color:#b40000e6}}@keyframes _ngcontent-%COMP%_blink{0%{opacity:1}50%{opacity:.3}to{opacity:1}}"]})};var ts="omi-theme",ns="omi-preferences",Xt=class r{constructor(e){this.platformId=e}ngOnInit(){if(!ii(this.platformId))return;let e=this.resolveInitialTheme();document.documentElement.setAttribute("data-theme",e),document.body.setAttribute("data-theme",e)}resolveInitialTheme(){let e=localStorage.getItem(ts);if(e==="day"||e==="night")return e;let t=localStorage.getItem(ns);if(!t)return"night";try{let n=JSON.parse(t);return n.theme==="day"||n.theme==="night"?n.theme:"night"}catch(n){return"night"}}static \u0275fac=function(t){return new(t||r)(Ve(Qn))};static \u0275cmp=H({type:r,selectors:[["app-root"]],decls:3,vars:0,template:function(t,n){t&1&&E(0,"app-app-shell")(1,"app-mob-alert")(2,"app-toast-container")},dependencies:[Gt,Ht,Yt],encapsulation:2})};ai(Xt,wr).catch(r=>console.error(r));

import{a as b}from"./chunk-NV5BHWM3.js";import{$ as c,Ca as m,J as l,P as s,Qc as o,X as d,aa as p,g as t,q as i}from"./chunk-V4EMFQCR.js";var n="omi-onboarded",f=class a{constructor(r){this.platformId=r;if(o(this.platformId)){let e=localStorage.getItem(n);this._isOnboarded.next(e==="true")}}alarmStore=p(b);_isOnboarded=new t(!1);_isFullscreen=new t(!1);_lastError=new t(null);isOnboarded$=this._isOnboarded.asObservable();isFullscreen$=this._isFullscreen.asObservable();lastError$=this._lastError.asObservable();activeAlertCount$=this.alarmStore.activeAlarms$.pipe(i(r=>r.length),l(),s({bufferSize:1,refCount:!0}));isOnboarded(){return this._isOnboarded.value}completeOnboarding(){this._isOnboarded.next(!0),o(this.platformId)&&localStorage.setItem(n,"true")}resetOnboarding(){this._isOnboarded.next(!1),o(this.platformId)&&localStorage.removeItem(n)}setFullscreen(r){this._isFullscreen.next(r)}setError(r){this._lastError.next(r)}reportError(r,e){this._lastError.next({code:r,message:e,timestamp:Date.now()})}clearError(){this._lastError.next(null)}static \u0275fac=function(e){return new(e||a)(c(m))};static \u0275prov=d({token:a,factory:a.\u0275fac,providedIn:"root"})};export{f as a};

import{a as M}from"./chunk-OR3LRC23.js";import{Ac as S,Bb as d,Cc as v,Ka as a,Mc as b,Nb as p,Ob as m,X as _,Ya as f,bb as l,ha as C,hb as h,nb as o,ob as s,pb as r,qb as c,va as k}from"./chunk-V4EMFQCR.js";function V(t,n){if(t&1&&(C(),c(0,"line",5)),t&2){let e=d(2);h("x1",0)("x2",e.width)("y1",e.thresholdY)("y2",e.thresholdY)}}function H(t,n){if(t&1&&(C(),s(0,"svg",2),c(1,"polyline",3),l(2,V,1,4,"line",4),r()),t&2){let e=d();h("viewBox",e.viewBox),a(),h("points",e.points)("stroke",e.stroke),a(),o("ngIf",e.thresholdY!==null)}}function L(t,n){t&1&&(s(0,"div",6),p(1,` \u2014
`),r())}var x=class t{data=[];width=120;height=32;stroke="var(--gb-needle-secondary)";threshold=null;viewBox=`0 0 ${this.width} ${this.height}`;points="";thresholdY=null;hasPoints=!1;ngOnChanges(n){(n.data||n.width||n.height||n.threshold)&&(this.viewBox=`0 0 ${this.width} ${this.height}`,this.updatePath())}updatePath(){if(!this.data||this.data.length<2){this.points="",this.thresholdY=null,this.hasPoints=!1;return}let n=this.data.map(y=>y.value),e=Math.min(...n),u=Math.max(...n)-e||1,g=this.width/(this.data.length-1);if(this.points=this.data.map((y,F)=>{let N=F*g,E=(y.value-e)/u,A=this.height-E*this.height;return`${N},${A}`}).join(" "),this.hasPoints=this.points.length>0,this.threshold===null||!Number.isFinite(this.threshold)){this.thresholdY=null;return}let O=(this.threshold-e)/u,D=Math.max(0,Math.min(1,O));this.thresholdY=this.height-D*this.height}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-shared-sparkline"]],inputs:{data:"data",width:"width",height:"height",stroke:"stroke",threshold:"threshold"},features:[k],decls:2,vars:2,consts:[["preserveAspectRatio","none","class","sparkline-svg",4,"ngIf"],["class","sparkline-empty",4,"ngIf"],["preserveAspectRatio","none",1,"sparkline-svg"],["fill","none","stroke-width","2","vector-effect","non-scaling-stroke"],["class","sparkline-threshold",4,"ngIf"],[1,"sparkline-threshold"],[1,"sparkline-empty"]],template:function(e,i){e&1&&l(0,H,3,4,"svg",0)(1,L,2,0,"div",1),e&2&&(o("ngIf",i.hasPoints),a(),o("ngIf",!i.hasPoints))},dependencies:[b,v],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;min-height:24px}.sparkline-svg[_ngcontent-%COMP%]{width:100%;height:100%;opacity:.9}.sparkline-threshold[_ngcontent-%COMP%]{stroke:var(--danger);stroke-width:1;stroke-dasharray:4 4;opacity:.7}.sparkline-empty[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:.75rem}"],changeDetection:0})};function z(t,n){if(t&1&&(s(0,"div",10),c(1,"app-icon",11),r()),t&2){let e=d();a(),o("name",e.icon)}}function R(t,n){if(t&1&&(s(0,"span",12),p(1),r()),t&2){let e=d();a(),m(e.unit)}}function j(t,n){if(t&1&&(s(0,"div",13),c(1,"app-shared-sparkline",14),r()),t&2){let e=d();a(),o("data",e.historyData)("height",24)("width",80)}}function Q(t,n){if(t&1&&(s(0,"span",20),p(1),r()),t&2){let e=d(3);a(),m(e.secondaryLabel)}}function Y(t,n){if(t&1&&(s(0,"div",17),l(1,Q,2,1,"span",18),s(2,"span",19),p(3),r()()),t&2){let e=d(2);a(),o("ngIf",e.secondaryLabel),a(2),m(e.secondaryValue)}}function W(t,n){if(t&1&&(s(0,"div",15),l(1,Y,4,2,"div",16),r()),t&2){let e=d();a(),o("ngIf",e.secondaryValue)}}var P=class t{label="";value="--";unit="";icon;status="neutral";secondaryLabel;secondaryValue;showSparkline=!1;historyData=[];get statusClass(){return`status-${this.status}`}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-instrument-card"]],inputs:{label:"label",value:"value",unit:"unit",icon:"icon",status:"status",secondaryLabel:"secondaryLabel",secondaryValue:"secondaryValue",showSparkline:"showSparkline",historyData:"historyData"},decls:12,vars:7,consts:[[1,"card",3,"ngClass"],[1,"card-header"],[1,"label"],["class","icon-wrapper",4,"ngIf"],[1,"card-body"],[1,"main-value-group"],[1,"value"],["class","unit",4,"ngIf"],["class","sparkline-wrapper",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"icon-wrapper"],["size","sm",3,"name"],[1,"unit"],[1,"sparkline-wrapper"],[3,"data","height","width"],[1,"card-footer"],["class","secondary-info",4,"ngIf"],[1,"secondary-info"],["class","sec-label",4,"ngIf"],[1,"sec-value"],[1,"sec-label"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"span",2),p(3),r(),l(4,z,2,1,"div",3),r(),s(5,"div",4)(6,"div",5)(7,"span",6),p(8),r(),l(9,R,2,1,"span",7),r(),l(10,j,2,3,"div",8),r(),l(11,W,2,1,"div",9),r()),e&2&&(o("ngClass",i.statusClass),a(3),m(i.label),a(),o("ngIf",i.icon),a(4),m(i.value),a(),o("ngIf",i.unit),a(),o("ngIf",i.showSparkline&&i.historyData.length>0),a(),o("ngIf",i.secondaryValue||i.secondaryLabel))},dependencies:[b,S,v,M,x],styles:["[_nghost-%COMP%]{display:block;min-width:140px}.card[_ngcontent-%COMP%]{background-color:var(--gb-bg-panel);border:1px solid var(--border-default);border-radius:var(--radius-lg);padding:1rem;display:flex;flex-direction:column;gap:.5rem;transition:all .2s ease;position:relative;overflow:hidden;height:100%}.status-neutral[_ngcontent-%COMP%]{border-color:var(--border-default)}.status-success[_ngcontent-%COMP%]{border-color:var(--success-500);background:linear-gradient(to bottom right,var(--gb-bg-panel),rgba(163,190,140,.1))}.status-warning[_ngcontent-%COMP%]{border-color:var(--warn-500);background:linear-gradient(to bottom right,var(--gb-bg-panel),rgba(235,203,139,.1))}.status-error[_ngcontent-%COMP%]{border-color:var(--danger-500);background:linear-gradient(to bottom right,var(--gb-bg-panel),rgba(191,97,106,.1));box-shadow:0 0 0 1px var(--danger-500);animation:_ngcontent-%COMP%_pulse-border 2s infinite}.status-off[_ngcontent-%COMP%]{opacity:.6;background-color:var(--bg-surface-secondary)}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;color:var(--gb-text-muted)}.label[_ngcontent-%COMP%]{font-size:var(--text-xs);text-transform:uppercase;letter-spacing:.05em;font-weight:600;color:var(--gb-text-muted)}.icon-wrapper[_ngcontent-%COMP%]{color:var(--gb-text-muted);opacity:.8}.card-body[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between;gap:.5rem}.main-value-group[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.25rem}.value[_ngcontent-%COMP%]{font-family:var(--font-binary);font-size:2rem;font-weight:700;line-height:1;color:var(--gb-text-value);font-variant-numeric:tabular-nums}.unit[_ngcontent-%COMP%]{font-size:var(--text-sm);color:var(--gb-text-muted);font-weight:500}.sparkline-wrapper[_ngcontent-%COMP%]{flex-shrink:0;opacity:.8}.card-footer[_ngcontent-%COMP%]{margin-top:auto;padding-top:.5rem;border-top:1px solid var(--border-subtle);display:flex;justify-content:space-between;align-items:center}.secondary-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:var(--text-xs);color:var(--gb-text-muted)}.sec-label[_ngcontent-%COMP%]{color:var(--gb-text-muted)}.sec-value[_ngcontent-%COMP%]{font-family:var(--font-binary);font-weight:600}@keyframes _ngcontent-%COMP%_pulse-border{0%{box-shadow:0 0 #bf616a66}70%{box-shadow:0 0 0 6px #bf616a00}to{box-shadow:0 0 #bf616a00}}.compact[_nghost-%COMP%]   .card[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{padding:.75rem}.compact[_nghost-%COMP%]   .value[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem}"],changeDetection:0})};var w=class t{STALE_THRESHOLD_MS=15e3;WARN_THRESHOLD_MS=8e3;getQuality(n){if(!n)return"missing";let e=Date.now()-n;return e>this.STALE_THRESHOLD_MS?"stale":e>this.WARN_THRESHOLD_MS?"warn":"good"}getIndicator(n,e,i=String){let u=this.getQuality(e);return{quality:u,cssClass:`gb-quality--${u}`,displayValue:u==="stale"||u==="missing"?"---":n!==null?i(n):"---"}}static \u0275fac=function(e){return new(e||t)};static \u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})};function tt(t,n="kn"){if(t==null||!Number.isFinite(t))return{value:"--",unit:n};let e=t;return n==="kn"?e=t*1.94384:n==="km/h"&&(e=t*3.6),{value:e.toFixed(1),unit:n}}function et(t){if(t==null||!Number.isFinite(t))return{value:"--",unit:"\xB0"};let n=t*180/Math.PI;return n=n%360,n<0&&(n+=360),{value:n.toFixed(0).padStart(3,"0"),unit:"\xB0"}}function nt(t,n="m"){if(t==null||!Number.isFinite(t))return{value:"--",unit:n};let e=t;return n==="ft"&&(e=t*3.28084),{value:e.toFixed(1),unit:n}}function it(t){return t==null||!Number.isFinite(t)?{value:"--",unit:"V"}:{value:t.toFixed(1),unit:"V"}}function at(t){return t==null||!Number.isFinite(t)?{value:"--",unit:"A"}:{value:t.toFixed(1),unit:"A"}}function rt(t){return t==null||!Number.isFinite(t)?{value:"--",unit:"W"}:Math.abs(t)>=1e3?{value:(t/1e3).toFixed(1),unit:"kW"}:{value:t.toFixed(0),unit:"W"}}function ot(t,n){if(t==null)return"--";let e=Math.abs(t),i=Math.floor(e),u=(e-i)*60,g="";return n==="lat"&&(g=t>=0?"N":"S"),n==="lon"&&(g=t>=0?"E":"W"),`${i.toString().padStart(n==="lon"?3:2,"0")}\xB0 ${u.toFixed(3)}' ${g}`}function st(t,n=0){return t==null||!Number.isFinite(t)?"--":t.toFixed(n)}function lt(t,n="nm"){if(t==null||!Number.isFinite(t))return{value:"--",unit:n};let e=t;return n==="nm"?(e=t/1852,{value:e.toFixed(e<10?2:1),unit:"NM"}):n==="km"?(e=t/1e3,{value:e.toFixed(1),unit:"km"}):{value:e.toFixed(0),unit:"m"}}function dt(t){if(t==null||!Number.isFinite(t))return"--:--";let n=Math.floor(t/3600),e=Math.floor(t%3600/60),i=Math.floor(t%60);return n>0?`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${e.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}export{w as a,tt as b,et as c,nt as d,it as e,at as f,rt as g,ot as h,st as i,lt as j,dt as k,x as l,P as m};

import{a as r}from"./chunk-MQVH6ZV5.js";import{$ as u,Ca as h,Qc as l,X as p,g as c}from"./chunk-V4EMFQCR.js";import{a,b as o}from"./chunk-EQDQRRRY.js";var v=[{id:"navigation-card",title:"dashboard.panels.navigation",description:"settings.widgets.desc.navigation",size:"L",requiredPaths:[r.navigation.speedOverGround,r.navigation.courseOverGroundTrue,r.navigation.headingTrue,r.navigation.position],category:"navigation"},{id:"wind-card",title:"dashboard.panels.wind",description:"settings.widgets.desc.wind",size:"L",requiredPaths:[r.environment.wind.speedApparent,r.environment.wind.angleApparent],category:"environment"},{id:"depth-card",title:"dashboard.panels.depth",description:"settings.widgets.desc.depth",size:"M",requiredPaths:[r.environment.depth.belowTransducer],category:"environment"},{id:"power-card",title:"dashboard.panels.power",description:"settings.widgets.desc.power",size:"M",requiredPaths:[r.electrical.batteries.house.voltage,r.electrical.batteries.house.current],category:"electrical"},{id:"system-card",title:"dashboard.panels.system",description:"settings.widgets.desc.system",size:"S",requiredPaths:[],category:"system"},{id:"sog-simple",title:"SOG (Simple)",description:"settings.widgets.desc.sog_simple",size:"S",requiredPaths:[r.navigation.speedOverGround],category:"navigation"},{id:"heading-simple",title:"Heading (Simple)",description:"settings.widgets.desc.heading_simple",size:"S",requiredPaths:[r.navigation.headingTrue],category:"navigation"},{id:"depth-simple",title:"Depth (Simple)",description:"settings.widgets.desc.depth_simple",size:"S",requiredPaths:[r.environment.depth.belowTransducer],category:"environment"}],d={widgets:[{id:"navigation-card",visible:!0,order:0},{id:"wind-card",visible:!0,order:1},{id:"depth-card",visible:!0,order:2},{id:"power-card",visible:!0,order:3},{id:"system-card",visible:!0,order:4},{id:"sog-simple",visible:!1,order:5},{id:"heading-simple",visible:!1,order:6},{id:"depth-simple",visible:!1,order:7}]};var m=class n{constructor(t){this.platformId=t;if(l(this.platformId)){let e=localStorage.getItem("omi-layout");if(e)try{let s=JSON.parse(e);this._layout.next(this.mergeWithDefaults(s))}catch(s){}}this.layout$.subscribe(e=>{l(this.platformId)&&localStorage.setItem("omi-layout",JSON.stringify(e))})}_layout=new c(d);layout$=this._layout.asObservable();mergeWithDefaults(t){let e=a({},t),s=new Set(t.widgets.map(i=>i.id));return d.widgets.forEach(i=>{s.has(i.id)||e.widgets.push(a({},i))}),e}getWidgetDefinitions(){return v}getSnapshot(){return this._layout.value}getVisibleWidgets(){return this._layout.value.widgets.filter(t=>t.visible).sort((t,e)=>t.order-e.order)}toggleWidget(t){let e=this._layout.value,s=o(a({},e),{widgets:e.widgets.map(i=>i.id===t?o(a({},i),{visible:!i.visible}):i)});this._layout.next(s)}setWidgetVisibility(t,e){let s=this._layout.value,i=o(a({},s),{widgets:s.widgets.map(g=>g.id===t?o(a({},g),{visible:e}):g)});this._layout.next(i)}reorderWidgets(t){let e=this._layout.value,s=o(a({},e),{widgets:e.widgets.map(i=>o(a({},i),{order:t.indexOf(i.id)}))});this._layout.next(s)}reset(){this._layout.next(d)}static \u0275fac=function(e){return new(e||n)(u(h))};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})};export{v as a,m as b};

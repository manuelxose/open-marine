<div class="tanks-grid">
  <div class="tank-card neon-border" *ngFor="let tank of view().tanks">
      <div class="tank-title">{{ tank.label }}</div>
      
      <div class="visual-area">
        <svg viewBox="0 0 60 180" class="tank-svg">
           <defs>
              <filter [id]="'glow-' + tank.id">
                 <feGaussianBlur stdDeviation="2" result="blur"/>
                 <feComposite in="SourceGraphic" in2="blur" operator="over"/>
              </filter>
              <linearGradient id="glass-fx" x1="0" y1="0" x2="1" y2="0">
                 <stop offset="0" stop-color="rgba(255,255,255,0.1)"/>
                 <stop offset="0.5" stop-color="rgba(255,255,255,0)"/>
                 <stop offset="1" stop-color="rgba(255,255,255,0.1)"/>
              </linearGradient>
           </defs>

           <!-- Tube Background -->
           <rect x="10" y="10" width="40" height="160" rx="20" class="tube-bg" />

           <!-- Fluid Level -->
           <!-- fill based on class color in SCSS -->
           <rect x="12" 
                 [attr.y]="getLiquidY(tank.level)" 
                 width="36" 
                 [attr.height]="getLiquidHeight(tank.level)" 
                 rx="18"
                 [class]="'fluid-rect ' + tank.class"
                 [attr.filter]="'url(#glow-' + tank.id + ')'"
           />
           
           <!-- Glass Reflection -->
           <rect x="10" y="10" width="40" height="160" rx="20" fill="url(#glass-fx)" style="pointer-events: none;" />

           <!-- Ticks -->
           <line x1="8" y1="50" x2="15" y2="50" class="tick"/>
           <line x1="8" y1="90" x2="20" y2="90" class="tick major"/>
           <line x1="8" y1="130" x2="15" y2="130" class="tick"/>

        </svg>

        <div class="tank-readout">
           <span class="value">{{ tank.level * 100 | number:'1.0-0' }}</span>
           <span class="unit">%</span>
        </div>
      </div>

      <div class="status-indicator" [class.alert]="tank.isAlert">
        {{ tank.isAlert ? 'ALERT' : 'OK' }}
      </div>
  </div>
</div>
